(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{4018:function(t,e,s){"use strict";var a=s("ff52"),i=s("025e"),r=(s("ddb0"),s("40182")),l=s("7050"),n=s("e7e2");const o={simpleRepetition:r["a"],spacedRepetition:l["a"],leitnerRepetition:n["a"]};class c{constructor(){}provideStudysetTerms(t,e){let s=[];for(let a of t)switch(a.learnMethod){case"simpleRepetition":s.push(r["a"].selectTerms(a,e));break;case"spacedRepetition":s.push(l["a"].selectTerms(a,e));break;default:s.push(n["a"].selectTerms(a,e))}return console.log("provide studysetTerms",s),s}calculateRepetitionDates(t,e,s,a){console.log("calculateRepetitionDates");let i=this.getStrategy(t.learnMethod),r=[];return i&&i.calculateRepetitionDates&&(r=i.calculateRepetitionDates(e,s,a,t)),r}calculateFacts(t,e){let s=this.getStrategy(t.learnMethod),a={};return s&&s.calculateFacts?(console.log("delegate calculateFacts to strategy",t.learnMethod),a=s.calculateFacts(t,e)):console.log(`no strategy named ${t.learnMethod} for studyset topic ${t.topic} with implemented strategy.calculateFacts method found`),a}getStrategy(t){return o[t]}}const d=new c;var u=d;const p={running:"Started",notStarted:"Not started",completed:"Completed"},m={spacedRepetition:"Spaced repetition",simpleRepetition:"Simple repetition",leitnerRepetition:"Leitner"},h={methods:{stateTitle(t){return p[t]},learnMethodTitle(t){return m[t]},formatDate(t){if(!t)return"";if(!t.getTime){let e=Object(i["l"])(t);return e.getTime?Object(i["c"])(e):"nan"}return Object(i["c"])(t)},formatShortDate(t){if(!t)return"";if(!t.getTime){let e=Object(i["l"])(t);return e.getTime?Object(i["e"])(e):"nan"}return Object(i["e"])(t)},_getStudysetsWithFilteredTerms(t,e){return u.provideStudysetTerms(t,e)},_calculateRepetitionDates(t){console.log("_calculateRepetitionDates");let e,s=Object(i["l"])(t.dueDate),a=Object(i["l"])(t.startDate),r=t.numberOfRepetitions;return s&&a&&r&&(e=u.calculateRepetitionDates(t,s,a,r),console.log("repetitionDates calculated for ",t.learnMethod,JSON.stringify(e))),e},_calculateFacts(t){let e=Object(i["l"])(t.dueDate),s=Object(i["l"])(t.startDate),a=t.numberOfRepetitions,r=t.repetitionDates,l=t.learnMethod,n={};console.log("_calculateFacts");let o="spacedRepetition"===l&&e&&s&&a,c="spacedRepetition"!==l&&s&&a;return(o||c)&&(r&&0!==r.length||(r=u.calculateRepetitionDates(t,e,s,a),t.repetitionDates=r),n=u.calculateFacts(t,r)),n}},computed:{xs(){return this.$q.screen.lt.md},dark(){return a["a"].isActive},cssTextLight(){return"text-light-"+(this.dark?"dark":"bright")}}};e["a"]=h},40182:function(t,e,s){"use strict";var a=s("5fb0"),i=s("025e");const r=864e5;class l{constructor(){}selectTerms(t){const e=t.requiredSuccesses?t.requiredSuccesses:6;if(a["f"].includes(t.status)){let s=t.items.filter((t=>{if(!t.history)return!0;let s=0;return Object.keys(t.history).forEach((e=>{Array.isArray(t.history[e])&&(s+=t.history[e].filter((t=>!0===t.success)).length)})),s<=e})),a=Object(i["p"])(s),r={...t,items:a};return r}return[]}calculateRepetitionDates(t,e,s){console.log("calculateRepetitionDates");let a=[],i=e;for(let l=0;l<s;l++)a.push(i),i=new Date(i.getTime()+r);return a}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case a["g"].completed:e.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:e.allOverProgress=0;break;case a["g"].running:t.completedRepetitionDates&&t.repetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/t.repetitionDates.length))}return e}}e["a"]=new l},"5c28":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{class:t.xs?"px-0":"q-pa-md",attrs:{id:"pageId"}},[s("div",{staticClass:"column justify-start align-start full-width"},[s("q-card",[s("q-card-section",{style:t.xs?"padding:0":""},t._l(t.folders,(function(e,a){return s("div",{key:a},[s("q-item-label",{attrs:{header:""}},[t._v("\n\t\t\t\t\t\t"+t._s(e.folderName)+"\n\t\t\t\t\t")]),t._l(e.studysets,(function(a,i){return s("div",{key:i,staticClass:"row px-0 mx-0 full-width",style:"padding:0;border-top:1px solid "+(t.dark?"#000":"#eee"),attrs:{clickable:"",to:t.createLink(e.folderId,a)}},[s("div",{staticClass:"col-xs-2 col-md-1 col-lg-2 column justify-center",class:t.dark?"text-white":""},["running"===a.status?s("q-circular-progress",{staticClass:"q-ma-md",attrs:{reverse:"",value:t.animationTimerCompleted?a.facts.allOverProgress:0,size:t.xs?"sm":"md",thickness:.6,color:"primary","track-color":"grey-3","center-color":"grey-5"}}):s("q-circular-progress",{staticClass:"text-light-blue q-ma-md",attrs:{thickness:.6,value:t.animationTimerCompleted?a.facts.allOverProgress:0,size:t.xs?"sm":"md","track-color":"grey-3","center-color":"grey-5",color:"positive"}})],1),s("div",{staticClass:"col-xs-10 col-md-8 col-lg-8 q-pt-sm"},[s("div",{staticClass:"text-subtitle text-weight-bold row align-center"},[s("div",{staticClass:"col"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(a.topic)+"\n\t\t\t\t\t\t\t\t\t"),t.learnMethodTitle(a.learnMethod)?s("q-chip",{staticClass:"text-white",attrs:{color:"primary",size:"sm",label:t.learnMethodTitle(a.learnMethod)}}):t._e()],1),s("q-chip",{staticClass:"col-auto text-white",attrs:{color:"running"===a.status?"positive":"primary",size:"sm",label:t.stateTitle(a.status)}}),s("q-chip",{staticClass:"text-white",attrs:{color:"grey",size:"sm",label:a.items.length+" items"}})],1),t.stateInfoType(a)?s(t.stateInfoType(a),{tag:"component",attrs:{studyset:a}}):s("running-state-info",{attrs:{studyset:a}}),t.hintText(a)?s("div",{class:t.cssTextLight},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.hintText(a))+"\n\t\t\t\t\t\t\t\t"),s("q-btn",{staticClass:"q-ml-md q-px-md",attrs:{size:"sm",dense:"",rounded:"",label:"edit",color:t.hintText(a)?"negative":null},on:{click:function(s){return s.preventDefault(),t.editItem(e.folderId,a)}}})],1):t._e()],1),s("div",{staticClass:"col-xs-12 col-md-3 col-lg-2 row justify-end q-pt-sm q-pr-sm",class:t.dark?"text-white":""},[t.isReadyToStart(a)?s("q-btn",{staticClass:"q-pr-sm q-ml-auto q-mb-auto q-mt-xs",attrs:{color:"primary",size:"sm",rounded:"",dense:"",label:"start",icon:"play_circle_filled"},on:{click:function(s){return t.startStudyset(e.folderId,a)}}}):t._e(),"running"===a.status?s("q-btn",{staticClass:"q-ml-auto q-mb-auto q-pr-sm q-mt-xs",attrs:{color:"positive",size:"sm",dense:"",rounded:"",label:"learn",icon:"play_circle_filled"},on:{click:function(s){return s.preventDefault(),t.learnStudyset(e.folderId,a)}}}):t._e(),s("q-btn",{staticClass:"q-mb-auto  ",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(s){return s.preventDefault(),t.deleteItem(e.folderId,a)}}}),s("q-btn",{staticClass:"q-mb-auto ",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"edit"},on:{click:function(s){return s.preventDefault(),t.editItem(e.folderId,a)}}})],1)])})),s("q-separator",{attrs:{spaced:""}})],2)})),0),s("q-card-section",{staticClass:"justify-end"},[s("q-btn",{staticClass:"q-ml-auto q-mr-md",attrs:{"text-color":"primary",rounded:"",outline:"",to:"/createstudyset",label:"add new studyset",icon:"add"}})],1)],1)],1)])},i=[],r=s("fc1b"),l=s("ea7b"),n=s("2f62"),o=s("025e"),c=s("5fb0"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row dates "},[s("div",{staticClass:"row"},[s("div",{class:t.cssTextLight},[t._v("\n\t\t\t\tIdealistic repetition dates (no failures)\n\t\t\t\t"),t._l(t.repetitionDates,(function(e,a){return[t.isRepetitionDateCompleted(e,a)?s("q-chip",{key:a,attrs:{color:"accent\t",icon:"done",dark:"",size:t.xs?"xs":"sm",label:t.formatShortDate(e)}}):s("q-chip",{key:a,attrs:{size:t.xs?"xs":"sm",label:t.formatShortDate(e)}})]}))],2)])])])},u=[],p=s("e7e2"),m=s("4018"),h={name:"RunningStateInfo",mixins:[m["a"]],props:{studyset:Object},computed:{repetitionDates(){let t;if(this.studyset&&this.studyset.numberOfRepetitions){let e=null,s=new Date(this.studyset.startDate?Date.parse(this.studyset.startDate):Date.now());t=p["a"].calculateRepetitionDates(e,s,this.studyset.numberOfRepetitions,this.studyset)}else t=[];return console.log("LeitnerRepStateInfo repetitionDates",t),t}},methods:{isRepetitionDateCompleted(t,e){let s=this.studyset.completedRepetitionDates;return!!s&&(s.length>e&&s[e]===t)}}},f=h,g=s("2877"),y=s("b047"),b=s("eebe"),D=s.n(b),v=Object(g["a"])(f,d,u,!1,null,null,null),R=v.exports;D()(v,"components",{QChip:y["a"]});var S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row dates "},[s("div",{staticClass:"row"},[s("div",{class:t.cssTextLight},[t._v("\n\t\t\t\tRepetitions\n\t\t\t\t"),t._l(t.studyset.repetitionDates,(function(e,a){return[t.isRepetitionDateCompleted(e,a)?s("q-chip",{key:a,attrs:{color:"accent",dark:"",icon:"done",size:t.xs?"xs":"sm",label:t.formatShortDate(e)}}):s("q-chip",{key:a,attrs:{size:t.xs?"xs":"sm",label:t.formatShortDate(e)}})]}))],2)])])])},O=[],x={name:"RunningStateInfo",mixins:[m["a"]],props:{studyset:{type:Object,default:()=>({})}},methods:{isRepetitionDateCompleted(t,e){let s=this.studyset.completedRepetitionDates;return!!s&&(s.length>e&&s[e]===t)}}},_=x,T=Object(g["a"])(_,S,O,!1,null,null,null),j=T.exports;D()(T,"components",{QChip:y["a"]});var C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row dates "},[s("q-item-label",{class:t.cssTextLight},[t.studyset.startDate?s("span",{staticClass:"q-pr-md"},[t._v("Start Date: "+t._s(t.formatShortDate(t.studyset.startDate)))]):t._e(),t.studyset.dueDate?s("span",[t._v("Due Date: "+t._s(t.formatShortDate(t.studyset.dueDate)))]):t._e()])],1),s("div",{staticClass:"row dates "},[s("div",{staticClass:"row"},[s("div",{class:t.cssTextLight},[t._v("\n\t\t\t\tRepetitions\n\t\t\t\t"),t._l(t.studyset.repetitionDates,(function(e,a){return[t.isRepetitionDateCompleted(e,a)?s("q-chip",{key:a,attrs:{color:"accent",icon:"done",dark:"",size:t.xs?"xs":"sm",label:t.formatShortDate(e)}}):s("q-chip",{key:a,attrs:{size:t.xs?"xs":"sm",label:t.formatShortDate(e)}})]}))],2)])])])},k=[],q={name:"RunningStateInfo",mixins:[m["a"]],props:{studyset:{type:Object,default:()=>({})}},methods:{isRepetitionDateCompleted(t,e){let s=this.studyset.completedRepetitionDates;return!!s&&(s.length>e&&s[e]===t)}}},w=q,I=s("0170"),$=Object(g["a"])(w,C,k,!1,null,null,null),L=$.exports;D()($,"components",{QItemLabel:I["a"],QChip:y["a"]});var M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row dates "},[s("q-item-label",{class:t.cssTextLight},[t.studyset.startDate?s("span",{staticClass:"q-pr-md"},[t._v("Start Date: "+t._s(t.formatShortDate(t.studyset.startDate)))]):t._e(),t.studyset.dueDate?s("span",[t._v("Due Date: "+t._s(t.formatShortDate(t.studyset.dueDate)))]):t._e()])],1),s("div",{staticClass:"row dates "},[s("div",{staticClass:"row"},[s("div",{class:t.cssTextLight},[t._v("\n\t\t\t\tRepetitions\n\t\t\t\t"),t._l(t.studyset.repetitionDates,(function(e,a){return[t.isRepetitionDateCompleted(e,a)?s("q-chip",{key:a,attrs:{color:"accent",dark:"",icon:"done",size:t.xs?"xs":"sm",label:t.formatShortDate(e)}}):s("q-chip",{key:a,attrs:{color:"accent",dark:"",size:t.xs?"xs":"sm",label:t.formatShortDate(e)}})]}))],2)])])])},P=[],z={name:"RunningStateInfo",mixins:[m["a"]],props:{studyset:{type:Object,default:()=>({})}},methods:{isRepetitionDateCompleted(t,e){let s=this.studyset.completedRepetitionDates;return!!s&&(s.length>e&&s[e]===t)}}},F=z,E=Object(g["a"])(F,M,P,!1,null,null,null),N=E.exports;D()(E,"components",{QItemLabel:I["a"],QChip:y["a"]});var Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.studyset?s("div",{staticClass:"row dates"},[s("div",{staticClass:"caption",class:t.dark?"text-white":""},[t.studyset.startDate?s("span",{class:t.cssTextLight},[t._v("\n\t\t\t\t"+t._s("Starts at "+t.formatDate(t.studyset.startDate))+"\n\t\t\t")]):t._e(),"spacedRepetition"===t.studyset.learnMethod&&t.studyset.dueDate?s("span",{class:t.cssTextLight},[t._v("\n\t\t\t\t"+t._s("ends at "+t.studyset.dueDate)+"\n\t\t\t")]):t._e()])]):t._e(),s("div",{staticClass:"row dates "},[s("q-item-label",{staticClass:"row caption",class:t.dark?"text-white":"",attrs:{lines:"5"}},[t.studyset.repetitionDates&&t.studyset.repetitionDates.length>0?s("div",{class:t.cssTextLight},[t._v("\n\t\t\t\tPlanned repetition dates:\n\t\t\t\t"),t._l(t.studyset.repetitionDates,(function(e,a){return s("span",{key:a,class:t.cssTextLight,attrs:{size:t.xs?"xs":"sm"}},[t._v("\n\t\t\t\t\t"+t._s(t.formatShortDate(e))+"\n\t\t\t\t")])}))],2):t._e()])],1)])},A=[],J={name:"RunningStateInfo",mixins:[m["a"]],props:{studyset:Object}},H=J,B=Object(g["a"])(H,Q,A,!1,null,null,null),V=B.exports;D()(B,"components",{QItemLabel:I["a"]});const W={},G={simpleRepetition:"SimpleRepetitionStateInfo",spacedRepetition:"SpacedRepetitionStateInfo",leitnerRepetition:"LeitnerRepetitionStateInfo"};var K={name:"Home",mixins:[m["a"]],components:{RunningStateInfo:N,NotStartedStateInfo:V,SimpleRepetitionStateInfo:j,LeitnerRepetitionStateInfo:R,SpacedRepetitionStateInfo:L},data(){return{user:"",email:"",animationTimerCompleted:!1}},created(){Object(l["d"])(r["a"],(t=>{t?(this.user=t.displayName,this.email=t.email):console.log("user name is null")})),this.init(),setTimeout((()=>{this.animationTimerCompleted=!0}),1e3)},computed:{...Object(n["b"])("database",{folders:t=>t.folders})},methods:{init(){console.log("Home init method called"),this.$store.commit("view/setPageTitle",{title:"Home"}),console.log("Validate studysets"),this.folders.forEach((t=>{t.studysets.forEach((e=>{this.checkStudysetDataAndPossiblyCorrect(e),e.facts=this.calculateFacts(t.folderId,e)}))})),console.log("factsByFolderIdAndTopicId",JSON.stringify(W,null,2)),console.log("Store studysets"),this.$store.dispatch("database/saveAllStudySet",{},{root:!0})},checkStudysetDataAndPossiblyCorrect(t){let e=Object(o["l"])(t.dueDate),s=Object(o["l"])(t.startDate),a=t.numberOfRepetitions;if(t.learnMethod===c["b"].leitner){let{sortedRepetitionDates:e,collectedRepetitionDates:s}=p["a"].calculateRepetitionDatesEmpiric(t);console.log("calculate rep. dates for leitner",e),t.repetitionDates=e,this.$store.dispatch("database/saveAllStudySet",{},{root:!0})}e&&t.dueDate.length>10&&(t.dueDate=Object(o["d"])(e)),s&&t.startDate.length>10&&(t.startDate=Object(o["d"])(s));let i=t.status;switch(i){case c["g"].running:s?(e||(t.dueDate=Object(o["m"])(s,21)),a||(t.numberOfRepetitions=5)):(t.status=c["g"].notStarted,console.log(`studyset ${t.topic} is running, but misses a startDate. status reset to notStarted`));break;case c["g"].completed:t.start;break}},stateInfoType(t){return G[t.learnMethod]},isReadyToStart(t){switch(t.learnMethod){case"simpleRepetition":return t.status===c["g"].notStarted&&t.startDate;case"leitnerRepetition":return t.status===c["g"].notStarted&&t.startDate;case"spacedRepetition":return t.status===c["g"].notStarted&&t.dueDate&&t.startDate}return!0},hintText(t){return t.status!==c["g"].notStarted||this.isReadyToStart(t)?null:"Please edit this studyset before learning and add the required start and end dates"},createLink(t,e){return`/studysets/${t}/${e.topicId}/learning`},editItem(t,e){this.$router.push(`/studysets/${t}/${e.topicId}`)},deleteItem(t,e){let s=this.folders.find((e=>e.folderId===t));if(s){let a=s.studysets.findIndex((t=>t.topicId===e.topicId));if(a>=0){if(s.studysets.splice(a,1),0===s.studysets.length){let e=this.folders.findIndex((e=>e.folderId===t));this.folders.splice(e,1)}this.$store.dispatch("database/saveAllStudySet",{},{root:!0})}}},startStudyset(t,e){e.status=c["g"].running,e.startDate=Object(o["d"])(new Date),e.items.forEach((t=>{t.history={}})),console.log("startStudySet",JSON.stringify(e,null,2)),this.$store.dispatch("database/saveAllStudySet",{},{root:!0}),this.$router.push(`/studysets/${t}/${e.topicId}/learning`)},learnStudyset(t,e){this.$router.push(`/studysets/${t}/${e.topicId}/learning`)},calculateFacts(t,e){console.log("calculateFacts");let s=this._calculateRepetitionDates(e);if(e.repetitionDates=s?s.map((t=>Object(o["d"])(t))):null,!e.facts||0===Object.keys(e.facts).length){let t=this._calculateFacts(e);e.facts=t}return W[`${t}/${e.topicId}`]=e.facts,e.facts},facts(t,e){console.log("facts");let s=W[`${t}/${e.topicId}`];return console.log("facts",s),s}}},U=K,X=(s("e413"),s("9989")),Y=s("f09f"),Z=s("a370"),tt=s("58ea"),et=s("9c40"),st=s("eb85"),at=Object(g["a"])(U,a,i,!1,null,"e040549c",null);e["default"]=at.exports;D()(at,"components",{QPage:X["a"],QCard:Y["a"],QCardSection:Z["a"],QItemLabel:I["a"],QCircularProgress:tt["a"],QChip:y["a"],QBtn:et["a"],QSeparator:st["a"]})},7050:function(t,e,s){"use strict";var a=s("5fb0"),i=s("025e");const r=864e5;class l{constructor(){}selectTerms(t,e){console.log(`includes ${a["f"].includes(t.status)}`);t.requiredSuccesses&&t.requiredSuccesses;if(a["f"].includes(t.status)){let e=t.items,s=Object(i["p"])(e),a={...t,items:s};return console.log("studysetTerms",JSON.stringify(a,null,2)),a}return[]}calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:e,retentionDecreases:s=[1.7,3.1,6.7,10,20,30,40,50]}){const a=s,i=.8,r=9.2;let l=0;for(let o=0;o<t;o++)l+=a[o];const n=-Math.log(i)*l;return e?n/r*e:n}calculateRepetitionDates(t,e,s){console.log("calculateRepetitionDates");let a=[],i=(t.getTime()-e.getTime())/r;for(let l=0;l<s;l++){let t=l+1,s=this.calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:i}),n=new Date(e.getTime()+r*s);a.push(n)}return a}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case a["g"].completed:e.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:e.allOverProgress=0;break;case a["g"].running:t.completedRepetitionDates&&t.repetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/t.repetitionDates.length))}return e}}const n=new l;e["a"]=n},c2aa:function(t,e,s){},e413:function(t,e,s){"use strict";s("c2aa")},e7e2:function(t,e,s){"use strict";s("4e82");var a=s("5fb0"),i=s("025e");const r={0:0,1:1,2:2,3:4,4:8,5:16,6:32,7:64};function l(t){if(!t)return[];let e=Object.keys(t).sort(((t,e)=>{let s=Object(i["l"])(t),a=Object(i["l"])(e),r=s.getTime()-a.getTime();return 0===r?0:r>0?1:-1}));return e}function n(t,e,s){let a=t.filter((t=>{if(!t.history)return e.getTime()<s.getTime();let a,n=l(t.history),o=n.length,c=Object(i["j"])(n);if(c){const t=Object(i["l"])(c);a=Object(i["m"])(t,r[`${o}`])}else a=e;return Object(i["i"])(s,a)}));return a}function o(t,e,s){let a=t.history?Object.keys(t.history).length:0,n=l(t.history),o=0===n.length?e:Object(i["l"])(Object(i["j"])(n));for(let l=a;l<s;l++)o=Object(i["m"])(o,r[`${l}`]),n.push(Object(i["d"])(o));return n}function c(t){let e={},s=t.numberOfRepetitions?t.numberOfRepetitions:5,a=Object(i["l"])(t.startDate);return t.items.forEach((t=>{let i=o(t,a,s);i.forEach((t=>{let s=e[t];s?s++:s=1,e[t]=s}))})),console.log("collectedRepetitionDates",JSON.stringify(e,null,2)),e}class d{constructor(){}selectTerms(t,e){console.log("selectTerms",t.repetitionDates),console.log(`includes ${a["f"].includes(t.status)}`);const s=Object(i["l"])(t.startDate);if(a["f"].includes(t.status)){let a=n(t.items,s,e),r=Object(i["p"])(a),l={...t,items:r};return console.log("studysetTerms",JSON.stringify(l,null,2)),l}return[]}calculateRepetitionDates(t,e,s,a){if(a){let{sortedRepetitionDates:t,collectedRepetitionDates:e}=this.calculateRepetitionDatesEmpiric(a);return console.log("calculateRepetitionDatesEmpiric",t),t}console.log("calculateRepetitionDates in planninng mode");let l=[e],n=Math.min(Object.keys(r).length,s),o=e;for(let c=0;c<n-1;c++){let t=c+1;o=Object(i["m"])(o,r[`${t}`]),l.push(o)}return console.log("calculateRepetitionDates",JSON.stringify(l,null,2)),l}calculateRepetitionDatesEmpiric(t){let e=c(t),s=Object.keys(e).sort(((t,e)=>{let s=Object(i["l"])(t),a=Object(i["l"])(e),r=s.getTime()-a.getTime();return 0===r?0:r>0?1:-1}));return console.log("collectedRepetitionDates",JSON.stringify(e,null,2)),{sortedRepetitionDates:s,collectedRepetitionDates:e}}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case a["g"].completed:e.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:e.allOverProgress=0;break;case a["g"].running:{let s={},a=Object(i["l"])(t.startDate),r=[];for(let e=0;e<60;e++){let l=Object(i["m"])(a,e),n=this.selectTerms(t,l),o=Object(i["d"])(l),c=n?n.length:0;s[o]=c,c>0&&r.push(o)}t.completedRepetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/r.length))}}return e}}const u=new d;e["a"]=u}}]);