(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{4018:function(e,t,s){"use strict";var a=s("ff52"),r=s("025e"),l=(s("ddb0"),s("40182")),i=s("7050"),c=s("e7e2");const n={simpleRepetition:l["a"],spacedRepetition:i["a"],leitnerRepetition:c["a"]};class o{constructor(){}provideStudysetTerms(e,t){let s=[];for(let a of e)switch(a.learnMethod){case"simpleRepetition":s.push(l["a"].selectTerms(a,t));break;case"spacedRepetition":s.push(i["a"].selectTerms(a,t));break;default:s.push(c["a"].selectTerms(a,t))}return console.log("provide studysetTerms",s),s}calculateRepetitionDates(e,t,s,a){console.log("calculateRepetitionDates");let r=this.getStrategy(e.learnMethod),l=[];return r&&r.calculateRepetitionDates&&(l=r.calculateRepetitionDates(t,s,a,e)),l}calculateFacts(e,t){let s=this.getStrategy(e.learnMethod),a={};return s&&s.calculateFacts?(console.log("delegate calculateFacts to strategy",e.learnMethod),a=s.calculateFacts(e,t)):console.log(`no strategy named ${e.learnMethod} for studyset topic ${e.topic} with implemented strategy.calculateFacts method found`),a}getStrategy(e){return n[e]}}const u=new o;var d=u;const p={running:"Started",notStarted:"Not started",completed:"Completed"},m={spacedRepetition:"Spaced repetition",simpleRepetition:"Simple repetition",leitnerRepetition:"Leitner"},g={methods:{stateTitle(e){return p[e]},learnMethodTitle(e){return m[e]},formatDate(e){if(!e)return"";if(!e.getTime){let t=Object(r["l"])(e);return t.getTime?Object(r["c"])(t):"nan"}return Object(r["c"])(e)},formatShortDate(e){if(!e)return"";if(!e.getTime){let t=Object(r["l"])(e);return t.getTime?Object(r["e"])(t):"nan"}return Object(r["e"])(e)},_getStudysetsWithFilteredTerms(e,t){return d.provideStudysetTerms(e,t)},_calculateRepetitionDates(e){console.log("_calculateRepetitionDates");let t,s=Object(r["l"])(e.dueDate),a=Object(r["l"])(e.startDate),l=e.numberOfRepetitions;return s&&a&&l&&(t=d.calculateRepetitionDates(e,s,a,l),console.log("repetitionDates calculated for ",e.learnMethod,JSON.stringify(t))),t},_calculateFacts(e){let t=Object(r["l"])(e.dueDate),s=Object(r["l"])(e.startDate),a=e.numberOfRepetitions,l=e.repetitionDates,i=e.learnMethod,c={};console.log("_calculateFacts");let n="spacedRepetition"===i&&t&&s&&a,o="spacedRepetition"!==i&&s&&a;return(n||o)&&(l&&0!==l.length||(l=d.calculateRepetitionDates(e,t,s,a),e.repetitionDates=l),c=d.calculateFacts(e,l)),c}},computed:{xs(){return this.$q.screen.lt.md},dark(){return a["a"].isActive},cssTextLight(){return"text-light-"+(this.dark?"dark":"bright")}}};t["a"]=g},40182:function(e,t,s){"use strict";var a=s("5fb0"),r=s("025e");const l=864e5;class i{constructor(){}selectTerms(e){const t=e.requiredSuccesses?e.requiredSuccesses:6;if(a["f"].includes(e.status)){let s=e.items.filter((e=>{if(!e.history)return!0;let s=0;return Object.keys(e.history).forEach((t=>{Array.isArray(e.history[t])&&(s+=e.history[t].filter((e=>!0===e.success)).length)})),s<=t})),a=Object(r["p"])(s),l={...e,items:a};return l}return[]}calculateRepetitionDates(e,t,s){console.log("calculateRepetitionDates");let a=[],r=t;for(let i=0;i<s;i++)a.push(r),r=new Date(r.getTime()+l);return a}calculateFacts(e){let t={allOverProgress:0};switch(e.status){case a["g"].completed:t.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:t.allOverProgress=0;break;case a["g"].running:e.completedRepetitionDates&&e.repetitionDates&&(t.allOverProgress=Math.round(100*e.completedRepetitionDates.length/e.repetitionDates.length))}return t}}t["a"]=new i},7050:function(e,t,s){"use strict";var a=s("5fb0"),r=s("025e");const l=864e5;class i{constructor(){}selectTerms(e,t){console.log(`includes ${a["f"].includes(e.status)}`);e.requiredSuccesses&&e.requiredSuccesses;if(a["f"].includes(e.status)){let t=e.items,s=Object(r["p"])(t),a={...e,items:s};return console.log("studysetTerms",JSON.stringify(a,null,2)),a}return[]}calculateNextRepetitionDateTime({repetitionNumber:e,totalDays:t,retentionDecreases:s=[1.7,3.1,6.7,10,20,30,40,50]}){const a=s,r=.8,l=9.2;let i=0;for(let n=0;n<e;n++)i+=a[n];const c=-Math.log(r)*i;return t?c/l*t:c}calculateRepetitionDates(e,t,s){console.log("calculateRepetitionDates");let a=[],r=(e.getTime()-t.getTime())/l;for(let i=0;i<s;i++){let e=i+1,s=this.calculateNextRepetitionDateTime({repetitionNumber:e,totalDays:r}),c=new Date(t.getTime()+l*s);a.push(c)}return a}calculateFacts(e){let t={allOverProgress:0};switch(e.status){case a["g"].completed:t.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:t.allOverProgress=0;break;case a["g"].running:e.completedRepetitionDates&&e.repetitionDates&&(t.allOverProgress=Math.round(100*e.completedRepetitionDates.length/e.repetitionDates.length))}return t}}const c=new i;t["a"]=c},e7e2:function(e,t,s){"use strict";s("4e82");var a=s("5fb0"),r=s("025e");const l={0:0,1:1,2:2,3:4,4:8,5:16,6:32,7:64};function i(e){if(!e)return[];let t=Object.keys(e).sort(((e,t)=>{let s=Object(r["l"])(e),a=Object(r["l"])(t),l=s.getTime()-a.getTime();return 0===l?0:l>0?1:-1}));return t}function c(e,t,s){let a=e.filter((e=>{if(!e.history)return t.getTime()<s.getTime();let a,c=i(e.history),n=c.length,o=Object(r["j"])(c);if(o){const e=Object(r["l"])(o);a=Object(r["m"])(e,l[`${n}`])}else a=t;return Object(r["i"])(s,a)}));return a}function n(e,t,s){let a=e.history?Object.keys(e.history).length:0,c=i(e.history),n=0===c.length?t:Object(r["l"])(Object(r["j"])(c));for(let i=a;i<s;i++)n=Object(r["m"])(n,l[`${i}`]),c.push(Object(r["d"])(n));return c}function o(e){let t={},s=e.numberOfRepetitions?e.numberOfRepetitions:5,a=Object(r["l"])(e.startDate);return e.items.forEach((e=>{let r=n(e,a,s);r.forEach((e=>{let s=t[e];s?s++:s=1,t[e]=s}))})),console.log("collectedRepetitionDates",JSON.stringify(t,null,2)),t}class u{constructor(){}selectTerms(e,t){console.log("selectTerms",e.repetitionDates),console.log(`includes ${a["f"].includes(e.status)}`);const s=Object(r["l"])(e.startDate);if(a["f"].includes(e.status)){let a=c(e.items,s,t),l=Object(r["p"])(a),i={...e,items:l};return console.log("studysetTerms",JSON.stringify(i,null,2)),i}return[]}calculateRepetitionDates(e,t,s,a){if(a){let{sortedRepetitionDates:e,collectedRepetitionDates:t}=this.calculateRepetitionDatesEmpiric(a);return console.log("calculateRepetitionDatesEmpiric",e),e}console.log("calculateRepetitionDates in planninng mode");let i=[t],c=Math.min(Object.keys(l).length,s),n=t;for(let o=0;o<c-1;o++){let e=o+1;n=Object(r["m"])(n,l[`${e}`]),i.push(n)}return console.log("calculateRepetitionDates",JSON.stringify(i,null,2)),i}calculateRepetitionDatesEmpiric(e){let t=o(e),s=Object.keys(t).sort(((e,t)=>{let s=Object(r["l"])(e),a=Object(r["l"])(t),l=s.getTime()-a.getTime();return 0===l?0:l>0?1:-1}));return console.log("collectedRepetitionDates",JSON.stringify(t,null,2)),{sortedRepetitionDates:s,collectedRepetitionDates:t}}calculateFacts(e){let t={allOverProgress:0};switch(e.status){case a["g"].completed:t.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:t.allOverProgress=0;break;case a["g"].running:{let s={},a=Object(r["l"])(e.startDate),l=[];for(let t=0;t<60;t++){let i=Object(r["m"])(a,t),c=this.selectTerms(e,i),n=Object(r["d"])(i),o=c?c.length:0;s[n]=o,o>0&&l.push(n)}e.completedRepetitionDates&&(t.allOverProgress=Math.round(100*e.completedRepetitionDates.length/l.length))}}return t}}const d=new u;t["a"]=d},e9bb:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{class:e.xs?"px-0":"q-pa-md",attrs:{id:"pageId"}},[s("q-card",[s("q-card-actions",[s("q-input",{staticClass:"q-ma-sm",attrs:{bordered:"",dense:"",placeholder:"add the due date"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{mask:"DD.MM.YYYY"},model:{value:e.dateStr,callback:function(t){e.dateStr=t},expression:"dateStr"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.dateStr,callback:function(t){e.dateStr=t},expression:"dateStr"}})],1),s("q-card-section",{style:e.xs?"padding:0":""},e._l(e.folders,(function(t,a){return s("div",{key:a},[s("q-item-label",{attrs:{header:""}},[e._v("\n\t\t\t\t\t"+e._s(t.folderName)+"\n\t\t\t\t")]),e._l(t.studysets,(function(t,a){return s("div",{key:a,staticClass:"row px-0 mx-0 full-width",style:"padding:0;border-top:1px solid "+(e.dark?"#000":"#eee"),attrs:{clickable:""}},[s("div",{staticClass:"col-4 row align-center q-mb-sm"},[s("div",{staticClass:"text-subtitle q-mt-sm"},[e._v(e._s(t.topic))]),s("q-chip",{attrs:{label:e.learnMethodTitle(t.learnMethod)}})],1),s("div",{staticClass:"col-auto"},[s("div",{staticClass:"row"},e._l(e.getRepetitionDates(t),(function(e,t){return s("div",{key:"__"+t,staticStyle:{width:"100px"}},[s("q-chip",{attrs:{size:"sm",label:e}})],1)})),0)])])})),s("q-separator",{attrs:{spaced:""}})],2)})),0)],1)],1)},r=[],l=s("2f62"),i=s("025e"),c=s("4018"),n=s("e7e2"),o=s("5fb0"),u={name:"Learn",mixins:[c["a"]],computed:{...Object(l["b"])("database",{folders:e=>e.folders})},data(){return{dateStr:Object(i["c"])(new Date)}},methods:{getRepetitionDates(e){if(e.learnMethod===o["b"].leitner){let{sortedRepetitionDates:t,collectedRepetitionDates:s}=n["a"].calculateRepetitionDatesEmpiric(e);return t}return e.repetitionDates?e.repetitionDates:this._calculateRepetitionDates(e)},calculateItems(e,t,s){let a=Object(i["m"])(Object(i["k"])(this.dateStr),s);console.log(`calculateItems for ${this.dateStr} = ${a}, offset=${s}`);let r=this._getStudysetsWithFilteredTerms([t],a);return r[0].items.length},formatDateHeader(e){let t=Object(i["m"])(Object(i["k"])(this.dateStr),e);return Object(i["e"])(t)}}},d=u,p=s("2877"),m=s("9989"),g=s("f09f"),f=s("4b7e"),b=s("27f9"),h=s("0016"),D=s("7cbe"),O=s("52ee"),y=s("9c40"),R=s("a370"),j=s("0170"),v=s("b047"),S=s("eb85"),T=s("7f67"),k=s("eebe"),w=s.n(k),q=Object(p["a"])(d,a,r,!1,null,null,null);t["default"]=q.exports;w()(q,"components",{QPage:m["a"],QCard:g["a"],QCardActions:f["a"],QInput:b["a"],QIcon:h["a"],QPopupProxy:D["a"],QDate:O["a"],QBtn:y["a"],QCardSection:R["a"],QItemLabel:j["a"],QChip:v["a"],QSeparator:S["a"]}),w()(q,"directives",{ClosePopup:T["a"]})}}]);