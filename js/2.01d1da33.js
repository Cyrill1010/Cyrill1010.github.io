(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{4018:function(t,e,s){"use strict";var i=s("ff52"),n=s("025e"),o=(s("ddb0"),s("40182")),a=s("7050"),r=s("e7e2");const l={simpleRepetition:o["a"],spacedRepetition:a["a"],leitnerRepetition:r["a"]};class c{constructor(){}provideStudysetTerms(t,e){let s=[];for(let i of t)switch(i.learnMethod){case"simpleRepetition":s.push(o["a"].selectTerms(i,e));break;case"spacedRepetition":s.push(a["a"].selectTerms(i,e));break;default:s.push(r["a"].selectTerms(i,e))}return console.log("provide studysetTerms",s),s}calculateRepetitionDates(t,e,s,i){console.log("calculateRepetitionDates");let n=this.getStrategy(t.learnMethod),o=[];return n&&n.calculateRepetitionDates&&(o=n.calculateRepetitionDates(e,s,i,t)),o}calculateFacts(t,e){let s=this.getStrategy(t.learnMethod),i={};return s&&s.calculateFacts?(console.log("delegate calculateFacts to strategy",t.learnMethod),i=s.calculateFacts(t,e)):console.log(`no strategy named ${t.learnMethod} for studyset topic ${t.topic} with implemented strategy.calculateFacts method found`),i}getStrategy(t){return l[t]}}const d=new c;var u=d;const h={running:"Started",notStarted:"Not started",completed:"Completed"},p={spacedRepetition:"Spaced repetition",simpleRepetition:"Simple repetition",leitnerRepetition:"Leitner"},m={methods:{stateTitle(t){return h[t]},learnMethodTitle(t){return p[t]},formatDate(t){if(!t)return"";if(!t.getTime){let e=Object(n["l"])(t);return e.getTime?Object(n["c"])(e):"nan"}return Object(n["c"])(t)},formatShortDate(t){if(!t)return"";if(!t.getTime){let e=Object(n["l"])(t);return e.getTime?Object(n["e"])(e):"nan"}return Object(n["e"])(t)},_getStudysetsWithFilteredTerms(t,e){return u.provideStudysetTerms(t,e)},_calculateRepetitionDates(t){console.log("_calculateRepetitionDates");let e,s=Object(n["l"])(t.dueDate),i=Object(n["l"])(t.startDate),o=t.numberOfRepetitions;return s&&i&&o&&(e=u.calculateRepetitionDates(t,s,i,o),console.log("repetitionDates calculated for ",t.learnMethod,JSON.stringify(e))),e},_calculateFacts(t){let e=Object(n["l"])(t.dueDate),s=Object(n["l"])(t.startDate),i=t.numberOfRepetitions,o=t.repetitionDates,a=t.learnMethod,r={};console.log("_calculateFacts");let l="spacedRepetition"===a&&e&&s&&i,c="spacedRepetition"!==a&&s&&i;return(l||c)&&(o&&0!==o.length||(o=u.calculateRepetitionDates(t,e,s,i),t.repetitionDates=o),r=u.calculateFacts(t,o)),r}},computed:{xs(){return this.$q.screen.lt.md},dark(){return i["a"].isActive},cssTextLight(){return"text-light-"+(this.dark?"dark":"bright")}}};e["a"]=m},40182:function(t,e,s){"use strict";var i=s("5fb0"),n=s("025e");const o=864e5;class a{constructor(){}selectTerms(t){const e=t.requiredSuccesses?t.requiredSuccesses:6;if(i["f"].includes(t.status)){let s=t.items.filter((t=>{if(!t.history)return!0;let s=0;return Object.keys(t.history).forEach((e=>{Array.isArray(t.history[e])&&(s+=t.history[e].filter((t=>!0===t.success)).length)})),s<=e})),i=Object(n["p"])(s),o={...t,items:i};return o}return[]}calculateRepetitionDates(t,e,s){console.log("calculateRepetitionDates");let i=[],n=e;for(let a=0;a<s;a++)i.push(n),n=new Date(n.getTime()+o);return i}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case i["g"].completed:e.allOverProgress=100;break;case i["g"].notStarted:case i["g"].cancelled:e.allOverProgress=0;break;case i["g"].running:t.completedRepetitionDates&&t.repetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/t.repetitionDates.length))}return e}}e["a"]=new a},"44c8":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[t.currentStudyset?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("q-card",{class:(t.xs?"":"q-ma-md")+" my-1"},[s("q-card-section",{staticClass:"text-title text-grey row"},[s("div",{class:"initialLearning"===t.mode?"col-12":"col-4"},[t._v("\n\t\t\t\t\t\t"+t._s(t.phaseTitle)+"\n\t\t\t\t\t\t"),s("q-chip",{staticClass:"self-center",attrs:{label:t.learnMethodTitle(t.studyset.learnMethod)}})],1),"initialLearning"!==t.mode?s("stats",{attrs:{successCount:t.currentRoundCounts.success,failsCount:t.currentRoundCounts.fails,totalItems:t.currentTerms.length,selectedDateStr:t.selectedDateStr}}):t._e(),"initialLearning"!==t.mode?s("div",{class:"col-xs-12 col-lg-4 row "+(t.xs?"justify-start":"justify-end")},[s("q-btn-toggle",{attrs:{outline:"",rounded:"",size:"sm","toggle-color":"secondary",options:t.learnTypes},model:{value:t.learnType,callback:function(e){t.learnType=e},expression:"learnType"}})],1):t._e()],1)],1)],1),s("div",{staticClass:"col-xs-12  col-xl-5 "},[s("q-card",{class:(t.xs?"":"q-ma-md")+" my-1"},[s("q-item-section",{staticClass:"full-width"},[s("timeline",{attrs:{showTime:!1,studyset:t.currentStudyset,dates:t.repetitionDates,completedDateStrings:t.currentStudyset.completedRepetitionDates}})],1)],1)],1),s("div",{staticClass:"col-xs-12 col-xl-7 inset-shadow-down shadow-8",staticStyle:{"min-height":"600px"}},[s("q-carousel",{class:(t.xs?"":"q-ma-md")+" shadow-1 rounded-borders",attrs:{"transition-prev":"slide-right","transition-next":"slide-left",swipeable:t.isLearningCard,arrows:t.isLearningCard,animated:"","control-color":"primary\t",padding:""},model:{value:t.currentTermIndex,callback:function(e){t.currentTermIndex=e},expression:"currentTermIndex"}},t._l(t.currentTerms,(function(e,i){return s("q-carousel-slide",{key:i,staticClass:"column no-wrap flex-center",attrs:{name:i}},[t.isLearningCard?s("learn-card",{staticClass:"full-width full-height",attrs:{term:e,termIndex:t.currentTermIndex}}):t.isFlashCard?s("flip-card",{staticClass:"full-width",attrs:{height:"300px",term:t.currentTerm,termIndex:t.currentTermIndex},on:{onSuccess:t.onSuccess,onFail:t.onFail}}):s("writing-card",{staticClass:"full-width",attrs:{termIndex:t.currentTermIndex,term:t.currentTerm},on:{onSuccess:t.onSuccess,onFail:t.onFail}}),i===t.currentTerms.length-1&&"initialLearning"===t.mode?s("continue-dialog",{attrs:{title:"Initial learning complete",question:"You have learned all cards!ðŸ‘ Ready to start learning?",cancel:"not yet",ok:"Of course"},on:{onConfirmed:t.moveToModeLearning},model:{value:t.showEndRoundDialog,callback:function(e){t.showEndRoundDialog=e},expression:"showEndRoundDialog"}}):t._e(),i===t.currentTerms.length-1&&"initialLearning"!==t.mode&&t.currentRoundCounts.fails>0?s("continue-dialog",{attrs:{title:"ðŸ‘ All terms repeated! Yet some mistakes seen.",question:"Do you wanna repeat these terms? {"+t.currentRoundCounts.fails+")",cancel:"No",ok:"yes please"},on:{onCancel:t.finishRoundConfirmed,onConfirmed:t.continueInModeLearnFailed},model:{value:t.showEndRoundDialog,callback:function(e){t.showEndRoundDialog=e},expression:"showEndRoundDialog"}}):t._e(),t.showEndRoundDialog&&i===t.currentTerms.length-1&&"initialLearning"!==t.mode&&0===t.studysetHistoryCounts.fails?s("study-session-completed-dialog",{attrs:{studyset:t.studyset,title:t.showStudysetCompletedDialog?"Great ðŸ‘ you have completed all rounds":"CongratulationsðŸ‘!",text:t.showStudysetCompletedDialog?"This is the end of this studyset":"You have learned all terms and did no mistakes!",question:"Proceed to overview?",ok:"yes please"},on:{onConfirmed:t.finishRoundConfirmed},model:{value:t.showEndRoundDialog,callback:function(e){t.showEndRoundDialog=e},expression:"showEndRoundDialog"}}):t._e()],1)})),1)],1),t.completedStudySession?s("q-banner",{staticClass:"bg-purple-8 text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"action",fn:function(){return[s("q-btn",{attrs:{flat:"",color:"white",label:"Continue as a Guest"}}),s("q-btn",{attrs:{flat:"",color:"white",label:"Sign in"}})]},proxy:!0}],null,!1,3345952433)},[t._v("\n\t\t\tWe can't find your saved recipes until you sign in.\n\n\t\t\t")]):t._e()],1):t._e()])},n=[],o=s("52cd"),a=s.n(o),r=s("da9e"),l=s("2f62"),c=s("025e"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flip-card",style:{height:t.height},on:{click:function(e){t.showSolution=!t.showSolution}}},[s("div",{staticClass:"flip-card-inner",class:{"flip-card-rotated":t.showSolution},style:t.dark?"border:1px solid #000":"border: 1px solid #f0f0f0;"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showSolution,expression:"!showSolution"}],staticClass:"flip-card-front"},[s("q-card",{staticClass:"column full-width full-height"},[s("q-card-section",{class:"col text-h"+(t.$q.screen.lt.sm?6:3)+" text-grey",staticStyle:{"margin-top":"40px"}},[t._v("\n\t\t\t\t\t\tQuestion\n\t\t\t\t\t")]),s("q-card-section",{staticClass:"col text-h3 text-weight-bold"},[t._v(t._s(t.term.key))]),s("q-card-section",{staticClass:"row justify-center"},[s("q-chip",{attrs:{rounded:"",label:"Item #"+(t.termIndex+1)}})],1)],1),s("q-chip",{staticClass:"text-caption",staticStyle:{position:"absolute",top:"10px",right:"10px"},on:{click:function(e){t.showSolution=!t.showSolution}}},[t._v("\n\t\t\t\t\tclick into the card to reveal the\n\t\t\t\t\t"),s("b",{staticClass:"q-pl-xs"},[t._v("answer")])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSolution,expression:"showSolution"}],staticClass:"flip-card-back"},[s("q-card",{staticClass:"column full-height full-width"},[s("q-card-section",{class:"col text-h"+(t.$q.screen.lt.sm?6:3)+" text-grey",staticStyle:{"margin-top":"40px"}},[t._v("\n\t\t\t\t\t\tAnswer\n\t\t\t\t\t")]),s("q-card-section",{staticClass:"col text-h2 text-weight-bold"},[t._v(t._s(t.term.val))]),s("q-card-section",{staticClass:"row justify-center"},[s("q-chip",{attrs:{rounded:"",label:"Item #"+(t.termIndex+1)}}),t.backgroundColor?s("q-chip",{style:{background:t.backgroundColor},attrs:{"text-color":"white",icon:"bookmark"}},[t._v("\n\t\t\t\t\t\t\tColor memory helper\n\t\t\t\t\t\t")]):t._e()],1)],1),s("q-chip",{staticClass:"text-caption",staticStyle:{position:"absolute",top:"10px",right:"10px"},on:{click:function(e){t.showSolution=!t.showSolution}}},[t._v("\n\t\t\t\t\tclick into the card to display the\n\t\t\t\t\t"),s("b",{staticClass:"q-pl-xs"},[t._v("definition")])])],1)])]),s("div",{staticClass:"row q-pt-lg justify-end"},[s("div",{staticClass:"justify-end"},[t.$q.screen.gt.sm?s("q-btn",{attrs:{outlined:"",rounded:"",size:t.$q.screen.lt.md?"sm":"md",icon:t.showSolution?"flip_to_front":"flip_to_back",label:t.showSolution?"show Definition":"reveal Solution"},on:{click:function(e){t.showSolution=!t.showSolution}}}):t._e(),s("q-btn",{staticClass:"q-mx-lg",attrs:{rounded:"",color:"negative",size:t.$q.screen.lt.md?"sm":"md",icon:"close",label:"Didn't know"},on:{click:function(e){return t.$emit("onFail")}}}),s("q-btn",{attrs:{rounded:"",color:"secondary",size:t.$q.screen.lt.md?"sm":"md",icon:"done",label:"Got it"},on:{click:function(e){return t.$emit("onSuccess")}}})],1)])])},u=[],h=s("4018"),p={name:"FlipCard",mixins:[h["a"]],props:{term:Object,termIndex:Number,height:{type:String,default:"calc(100vh - 400px)"}},data(){return{showSolution:!1}},computed:{backgroundColor(){return this.term.backgroundColor?this.term.backgroundColor:null}}},m=p,g=(s("f92b"),s("2877")),y=s("f09f"),f=s("a370"),b=s("b047"),x=s("9c40"),v=s("eebe"),C=s.n(v),S=Object(g["a"])(m,d,u,!1,null,"4a73f5c6",null),D=S.exports;C()(S,"components",{QCard:y["a"],QCardSection:f["a"],QChip:b["a"],QBtn:x["a"]});var w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-xs-12 col-md-6 "},[s("q-card",{staticClass:"full-height"},[s("q-card-section",{class:"col text-center "+(t.xs?"title":"text-h5")+" text-grey q-pb-0"},[t._v("\n\t\t\t\tQuestion\n\t\t\t\t"),t.xs?s("q-chip",{attrs:{rounded:"",label:"Item #"+(t.termIndex+1)}}):t._e()],1),s("q-card-section",{staticClass:"col text-center text-h3 text-weight-bold"},[t._v("\n\t\t\t\t"+t._s(t.term.key)+"\n\t\t\t")]),t.xs?t._e():s("q-card-section",{staticClass:"row col justify-center align-end"},[s("q-chip",{attrs:{rounded:"",label:"Item #"+(t.termIndex+1)}})],1)],1)],1),s("div",{staticClass:"col-xs-12 col-md-6 "},[s("q-card",{staticClass:"full-height"},[s("q-card-section",{class:"col text-center  "+(t.xs?"title":"text-h5")+" text-grey"},[t.xs&&t.backgroundColor?s("q-chip",{style:{background:t.backgroundColor},attrs:{"text-color":"white",icon:"bookmark"}},[t._v("\n\t\t\t\t\tColor memory helper\n\t\t\t\t")]):t._e(),t._v("\n\t\t\t\tAnswer\n\t\t\t\t"),t.xs?s("q-chip",{attrs:{rounded:"",label:"Item #"+(t.termIndex+1)}}):t._e()],1),s("q-card-section",{staticClass:"col text-center text-h3 text-weight-bold"},[t._v(t._s(t.term.val))]),t.xs?t._e():s("q-card-section",{staticClass:"row justify-center align-end"},[s("q-chip",{attrs:{rounded:"",label:"Item #"+(t.termIndex+1)}})],1),t.xs?t._e():s("q-card-section",{staticClass:"col text-center text-h3 text-weight-bold"},[t.backgroundColor?s("q-chip",{style:{background:t.backgroundColor},attrs:{"text-color":"white",icon:"bookmark"}},[t._v("\n\t\t\t\t\tColor memory helper\n\t\t\t\t")]):t._e()],1)],1)],1)])},q=[],_={name:"LearnCard",mixins:[h["a"]],props:{term:Object,termIndex:Number},computed:{backgroundColor(){return this.term.backgroundColor}}},k=_,T=Object(g["a"])(k,w,q,!1,null,null,null),O=T.exports;C()(T,"components",{QCard:y["a"],QCardSection:f["a"],QChip:b["a"]});var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-card",[s("q-card-section",{staticClass:"row justify-center text-h3 text-weight-bold"},[t._v(t._s(t.term.key))]),s("q-card-section",{staticClass:"row justify-center text-h3 text-weight-bold"},[s("q-input",{staticClass:"col-xs-12 col-sm-8 col-md-6",attrs:{clearable:"",rounded:"",outlined:"",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.verify.apply(null,arguments)}},model:{value:t.solution,callback:function(e){t.solution=e},expression:"solution"}})],1),s("q-card-section",{staticClass:"row justify-center"},[s("q-chip",{attrs:{rounded:"",label:"Item #"+(t.termIndex+1)}})],1)],1),s("div",{staticClass:"row q-pt-lg justify-end"},[s("div",{staticClass:"justify-end"},[s("q-btn",{staticClass:"q-mx-lg",attrs:{rounded:"",color:"negative",size:t.$q.screen.lt.md?"sm":"md",label:"Verify"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.verify.apply(null,arguments)},click:t.verify}})],1)]),s("q-dialog",{attrs:{position:"right"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[s("q-card",{staticClass:"q-pa-md",staticStyle:{"min-width":"300px"}},[s("q-linear-progress",{attrs:{value:1,color:"primary"}}),t.solution===t.term.val?s("q-card-section",{staticClass:"items-center no-wrap"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 text-h6 text-weight-bold"},[t._v("Right solution")]),s("div",{staticClass:"col-12 text-grey"},[t._v("Continue with next term?")]),s("div",{staticClass:"col-12 row justify-end q-mt-md"},[s("q-btn",{staticClass:"justify-end",attrs:{icon:"chevron_right",outline:"",rounded:"",label:"Next card",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSuccess.apply(null,arguments)},click:t.onSuccess}})],1)])]):t._e(),t.solution!==t.term.val?s("q-card-section",{staticClass:"row items-center no-wrap "},[s("div",{staticClass:"col-12 text-h6 text-weight-bold"},[t._v("Ups, wrong solution!!")])]):t._e(),t.solution!==t.term.val?s("q-card-section",{staticClass:"q-col-gutter-sm"},[s("q-expansion-item",{attrs:{icon:"tungsten",label:"Solution display",caption:"Would you like to see the solution?"},model:{value:t.displaySolution,callback:function(e){t.displaySolution=e},expression:"displaySolution"}},[s("q-card",[s("q-card-section",{staticClass:"12"},[s("div",{staticClass:"col text-weight-bold"},[t._v("The right solution is")]),s("div",{staticClass:"col text-weight-bold text-primary"},[t._v(t._s(t.term.val))]),s("div",{staticClass:"col text-weight-bold"},[t._v("Your solution was")]),s("div",{staticClass:"col text-weight-bold text-negative"},[t._v(t._s(t.solution))])])],1)],1),s("div",{staticClass:"row col-12 justify-end"},[s("q-btn",{staticClass:"q-mr-sm",attrs:{outline:"",rounded:"",label:"yes"},on:{click:function(e){t.displaySolution=!0}}}),s("q-btn",{staticClass:"col-auto",attrs:{outline:"",rounded:"",label:"no, next card please",autofocus:""},on:{click:t.onFail,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onFail.apply(null,arguments)}}})],1)],1):t._e()],1)],1)],1)},j=[],I={name:"WritingCard",props:{term:Object,termIndex:Number},data(){return{showSolution:!1,solution:"",slide:1,showDialog:!1,displaySolution:!1}},methods:{onSuccess(){console.log("emit onSuccess"),this.showDialog=!1,this.$emit("onSuccess")},onFail(){console.log("emit onFail"),this.showDialog=!1,this.$emit("onFail")},verify(){this.showDialog=!0}},watch:{displaySolution(t,e){!0===t&&setTimeout((()=>{this.displaySolution=!1}),4e3)}}},$=I,E=s("27f9"),F=s("24e8"),Q=s("6b1d"),L=s("3b73"),M=Object(g["a"])($,R,j,!1,null,null,null),N=M.exports;C()(M,"components",{QCard:y["a"],QCardSection:f["a"],QInput:E["a"],QChip:b["a"],QBtn:x["a"],QDialog:F["a"],QLinearProgress:Q["a"],QExpansionItem:L["a"]});var P=s("7050"),A=s("40182"),W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-xs-8 col-lg-4 row"},[s("div",{staticClass:"text-caption",staticStyle:{transform:"translateX(15px) translateY(-10px)"}},[t._v("\n\t\tmatches\n\t")]),s("div",{staticClass:"text-secondary text-h3"},[t._v(t._s(t.successCount))]),s("div",{staticClass:"text-caption",staticStyle:{"margin-left":"-10px",transform:"translateX(15px) translateY(29px)"}},[t._v("\n\t\tfailures\n\t")]),s("div",{staticStyle:{transform:"translateY(15px)"}},[t._v(t._s(t.failsCount))]),s("div",{staticClass:"text-caption",staticStyle:{"margin-top":"10px","padding-left":"10px"}},[t._v("of total")]),s("div",{staticClass:"text-h5",staticStyle:{"margin-top":"10px","margin-left":"2px"}},[t._v(t._s(t.totalItems))])])},H=[],B={name:"Stats",mixins:[h["a"]],props:{successCount:Number,failsCount:Number,totalItems:Number,selectedDateStr:String}},J=B,z=Object(g["a"])(J,W,H,!1,null,null,null),Y=z.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{position:"right"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[s("q-card",[s("q-linear-progress",{attrs:{value:1,color:"primary"}}),s("q-card-section",{staticClass:"items-center no-wrap"},[s("div",{staticClass:"text-h6 text-weight-bold"},[t._v("\n\t\t\t\t"+t._s(t.title)+"\n\t\t\t")])]),t.question?s("q-card-section",{staticClass:"q-pt-none text-grey"},[t._v("\n\t\t\t"+t._s(t.question)+"\n\t\t")]):t._e(),s("q-card-actions",{attrs:{align:"right"}},[t.cancel?s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.cancel,color:"primary"},on:{click:function(e){return t.$emit("onCancel")}}}):t._e(),t.ok?s("q-btn",{attrs:{flat:"",label:t.ok,color:"primary",autofocus:""},on:{click:function(e){return t.$emit("onConfirmed")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("onConfirmed")}}}):t._e()],1)],1)],1)},U=[],V={name:"ContinueDialog",props:{value:Boolean,title:{type:String,required:!1},question:{type:String,required:!1},cancel:{type:String,required:!1},ok:{type:String,required:!1}},data(){return{showDialog:this.value}},watch:{showDialog(t,e){return console.log("showDialog watcher",t),this.$emit("input",t)},value(t,e){this.showDialog=t}}},X=V,K=s("4b7e"),Z=s("7f67"),tt=Object(g["a"])(X,G,U,!1,null,null,null),et=tt.exports;C()(tt,"components",{QDialog:F["a"],QCard:y["a"],QLinearProgress:Q["a"],QCardSection:f["a"],QCardActions:K["a"],QBtn:x["a"]}),C()(tt,"directives",{ClosePopup:Z["a"]});var st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{position:"right"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[s("q-card",[s("q-linear-progress",{attrs:{value:1,color:"primary"}}),s("q-card-section",[s("div",{staticClass:"text-h6 text-weight-bold"},[t._v("\n\t\t\t\t"+t._s(t.title)+"\n\t\t\t")])]),s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("\n\t\t\t\tRound "+t._s(t.studyset.completedRepetitionDates?t.studyset.completedRepetitionDates.length+1:1)+"\n\t\t\t")])]),s("q-card-section",[s("div",{staticClass:"text-grey"},[t._v("\n\t\t\t\t"+t._s(t.text)+"\n\t\t\t")])]),t.question?s("q-card-section",{staticClass:"q-pt-none"},[t._v("\n\t\t\t"+t._s(t.question)+"\n\t\t")]):t._e(),s("q-card-actions",{attrs:{align:"right"}},[t.cancel?s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.cancel,color:"primary"},on:{click:function(e){return t.$emit("onCancel")}}}):t._e(),t.ok?s("q-btn",{attrs:{flat:"",label:t.ok,color:"primary",autofocus:""},on:{click:function(e){return t.$emit("onConfirmed")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("onConfirmed")}}}):t._e()],1)],1)],1)},it=[],nt={name:"StudySessionCompletedDialog",props:{value:Boolean,studyset:Object,title:{type:String,required:!1},text:{type:String,required:!1},question:{type:String,required:!1},cancel:{type:String,required:!1},ok:{type:String,required:!1}},data(){return{showDialog:this.value}},watch:{showDialog(t,e){return console.log("showDialog watcher",t),this.$emit("input",t)},value(t,e){this.showDialog=t}}},ot=nt,at=Object(g["a"])(ot,st,it,!1,null,null,null),rt=at.exports;C()(at,"components",{QDialog:F["a"],QCard:y["a"],QLinearProgress:Q["a"],QCardSection:f["a"],QCardActions:K["a"],QBtn:x["a"]}),C()(at,"directives",{ClosePopup:Z["a"]});var lt=s("e7e2"),ct=s("5fb0");const dt={simpleRepetition:A["a"],spacedRepetition:P["a"]},ut={flashcards:"Flashcards",writing:"Writing cards"},ht={learnCard:{title:"CongratulationsðŸ‘! Initial learning round completed."},flashcards:{title:"CongratulationsðŸ‘! Study session completed! Do you wanna continue learning?"},writing:{title:"CongratulationsðŸ‘! Study session completed! Do you wanna continue learning?"}},pt={initialLearning:"initialLearning",learning:"learning",learnFailedOnes:"learnFailedOnes"},mt={initialLearning:"Memorize your cards",learning:"Repeat",learnFailedOnes:"Repeat failed ones"};var gt={name:"Learning",mixins:[h["a"]],components:{FlipCard:D,LearnCard:O,WritingCard:N,Stats:Y,ContinueDialog:et,StudySessionCompletedDialog:rt,Timeline:r["a"]},mounted(){this.init()},data(){return{learnMethodStrategy:A["a"],repetitionDates:[],selectedDate:null,selectedDateStr:"",mode:pt.initialLearning,studysetsWithFilteredTerms:[],currentStudysetIndex:0,currentTermIndex:0,studyset:{},input:"",completedStudySession:!1,showStudysetCompletedDialog:!1,studysetHistoryCounts:{success:0,fails:0,notDone:0},currentRoundCounts:{success:0,fails:0,notDone:0},currentLearnCycleFailsCount:0,showEndRoundDialog:!1,learnTypeMapWithAccordingText:ht,learnTypes:ct["c"]}},computed:{...Object(l["b"])("database",{folders:t=>t.folders}),learnType:{get(){return this.studyset.learnType},set(t){this.studyset.learnType=t,this.$store.dispatch("database/saveAllStudySet",{folders:this.folders},{root:!0})}},currentStudyset(){if(!this.studysetsWithFilteredTerms)return null;let t=this.studysetsWithFilteredTerms[this.currentStudysetIndex];return t},currentTerms(){switch(console.log("calculateItems",this.mode),this.mode){case pt.initialLearning:case pt.learning:return this.currentStudyset.items;case pt.learnFailedOnes:default:return Object(c["f"])(this.currentStudyset,this.selectedDateStr)}},currentTerm(){return this.studysetsWithFilteredTerms&&this.currentStudyset&&this.currentTerms?this.currentTerms[this.currentTermIndex]:null},backgroundColor(){return this.currentTerm.backgroundColor},showLearningType(){return ut[this.currentStudyset.learnType]},isLearningCard(){return this.mode===pt.initialLearning},isFlashCard(){return!this.completedStudySession&&this.currentTerm&&"flashcards"===this.studyset.learnType},phaseTitle(){return`${mt[this.mode]}`}},methods:{init(){const{folderId:t,topicId:e}=this.$route.params;console.log(`Initialize learning.vue for folderId=${t} and topicId=${e}`);let s=`$[?(@.folderId=="${t}")].studysets[?(@.topicId=="${e}")]`,i=a.a.query(this.folders,s);if(!i||0===i.length)return void console.warn(`We did not found a studyset with folderId=${t} and topicId=${e}`);let n=i[0];if(n.learnMethod===ct["b"].leitner){let{sortedRepetitionDates:t,collectedRepetitionDates:e}=lt["a"].calculateRepetitionDatesEmpiric(n);console.log("calculate rep. dates for leitner",t),n.repetitionDates=t,this.$store.dispatch("database/saveAllStudySet",{},{root:!0})}console.log("studyset.repetitionDates",n.repetitionDates),this.$store.commit("view/setPageTitle",{title:`Studyset "${n.topic}" repetition`}),this.studyset=n,this.loadRepetitionDates(),this.studysetsWithFilteredTerms=this.getStudysetsWithFilteredTerms(i),this.learnMethodStrategy=dt[n.learnMethod],this.learnMethodStrategy||(console.log("WARNING: NO learnMethod defined",this.learnMethod),console.log("studyset",JSON.stringify(n)),console.log("learnmethod=",n.learnMethod)),this.mode=n.completedRepetitionDates&&n.completedRepetitionDates.length>0?pt.learning:pt.initialLearning},loadRepetitionDates(){let t=this.studyset,e=Object(c["l"])(t.dueDate),s=Object(c["l"])(t.startDate);t.repetitionDates||(console.warn("WE NEED TO CALCULATE REPETITION DATES - HOWEVER SHOULD BE STORED ON STUDYSET"),t.repetitionDates=this.learnMethodStrategy.calculateRepetitionDates(e,s,t.numberOfRepetitions,t)),this.repetitionDates=t.repetitionDates.map((t=>Object(c["l"])(t))),this.selectedDate=this.repetitionDates[t.completedRepetitionDates?t.completedRepetitionDates.length:0]},getStudysetsWithFilteredTerms(t){return this._getStudysetsWithFilteredTerms(t,this.selectedDate)},onSuccess(){this.trackHistory(!0),this.next()},onFail(){this.trackHistory(!1),this.next()},trackHistory(t){this.currentTerm&&(Object(c["a"])(this.currentTerm),this.initialLearning||(console.log("trackHistory"),this.studyset.learnMethod===ct["b"].leitner?Object(c["s"])(this.currentTerm,this.selectedDateStr,t):Object(c["r"])(this.currentTerm,this.selectedDateStr,t)),t?this.currentRoundCounts.success++:this.currentRoundCounts.fails++,this.currentTerm||console.log("checkthings"),console.log("history",JSON.stringify(this.currentTerm.history,null,2)),this.$store.dispatch("database/saveAllStudySet",{},{root:!0}))},next(){this.studysetHistoryCounts=Object(c["q"])({studyset:this.currentStudyset,dateStr:this.selectedDateStr}),console.log(`studysetHistoryCounts for ${this.selectedDateStr}`,JSON.stringify(this.studysetHistoryCounts)),this.currentTermIndex<this.currentTerms.length-1?this.currentTermIndex++:this.finishRound()},moveToModeLearning(){this.currentTermIndex=0,this.currentRoundCounts={success:0,fails:0},this.showEndRoundDialog=!1,this.mode=pt.learning},continueInModeLearnFailed(){this.currentTermIndex=0,this.currentRoundCounts={success:0,fails:0},this.mode=pt.learnFailedOnes,this.showEndRoundDialog=!1},async finishRound(){console.log("finishRound"),this.showEndRoundDialog=!0,this.studyset.completedRepetitionDates.length===this.repetitionDates.length&&(this.showStudysetCompletedDialog=!0)},async finishRoundConfirmed(){console.log("finishRoundConfirmed"),Object(c["n"])(this.studyset,"completedRepetitionDates",this.selectedDateStr),this.studyset.facts=this._calculateFacts(this.studyset),this.studyset.completedRepetitionDates&&this.repetitionDates&&this.studyset.completedRepetitionDates.length===this.repetitionDates.length&&(this.studyset.status=ct["g"].completed,this.showStudysetCompletedDialog=!0),await this.$store.dispatch("database/saveAllStudySet",{folders:this.folders},{root:!0}),this.showEndRoundDialog=!1,this.$router.push("/home")}},watch:{$route(t,e){this.init()},selectedDate(t,e){this.selectedDateStr=Object(c["d"])(this.selectedDate),console.log("converted to ISO str",this.selectedDate,this.selectedDateStr)},currentTermIndex(t,e){let s=this.mode===pt.initialLearning&&this.currentTermIndex===this.currentTerms.length-1;s&&setTimeout((()=>{this.showEndRoundDialog=!0}),2e3)}}},yt=gt,ft=(s("d30d"),s("9989")),bt=s("6a67"),xt=s("4074"),vt=s("880c"),Ct=s("62cd"),St=s("54e1"),Dt=Object(g["a"])(yt,i,n,!1,null,"5c114faf",null);e["default"]=Dt.exports;C()(Dt,"components",{QPage:ft["a"],QCard:y["a"],QCardSection:f["a"],QChip:b["a"],QBtnToggle:bt["a"],QItemSection:xt["a"],QCarousel:vt["a"],QCarouselSlide:Ct["a"],QBanner:St["a"],QBtn:x["a"]})},"5e23":function(t,e,s){},7050:function(t,e,s){"use strict";var i=s("5fb0"),n=s("025e");const o=864e5;class a{constructor(){}selectTerms(t,e){console.log(`includes ${i["f"].includes(t.status)}`);t.requiredSuccesses&&t.requiredSuccesses;if(i["f"].includes(t.status)){let e=t.items,s=Object(n["p"])(e),i={...t,items:s};return console.log("studysetTerms",JSON.stringify(i,null,2)),i}return[]}calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:e,retentionDecreases:s=[1.7,3.1,6.7,10,20,30,40,50]}){const i=s,n=.8,o=9.2;let a=0;for(let l=0;l<t;l++)a+=i[l];const r=-Math.log(n)*a;return e?r/o*e:r}calculateRepetitionDates(t,e,s){console.log("calculateRepetitionDates");let i=[],n=(t.getTime()-e.getTime())/o;for(let a=0;a<s;a++){let t=a+1,s=this.calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:n}),r=new Date(e.getTime()+o*s);i.push(r)}return i}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case i["g"].completed:e.allOverProgress=100;break;case i["g"].notStarted:case i["g"].cancelled:e.allOverProgress=0;break;case i["g"].running:t.completedRepetitionDates&&t.repetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/t.repetitionDates.length))}return e}}const r=new a;e["a"]=r},"81ff":function(t,e,s){},cc3a:function(t,e,s){},d0c0:function(t,e,s){"use strict";s("81ff")},d30d:function(t,e,s){"use strict";s("5e23")},da9e:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{padding:"0 40px"}},[s("div",{staticStyle:{position:"relative",height:"80px"}},[t._l(t.dates,(function(e,i){return[s("div",{key:i,staticClass:"circle",style:t.circleStyle(e,i),on:{click:function(s){return t.$emit("onDateSelected",e)}}}),i<t.dates.length-1?s("div",{key:i+"_",staticClass:"line",style:t.intervalStyle(e,i)}):t._e(),s("div",{key:i+"__",staticClass:"text",style:t.textStyle(e,i)},[s("div",[t._v(t._s(t.formatDate(e)))]),t.showTime?s("div",[t._v(t._s(t.formatTime(e)))]):t._e()]),s("div",{key:i+"___",staticClass:"text",style:t.successRateStyle(e,i)},[s("div",[t._v("\n\t\t\t\t\t"+t._s(t.getSuccessRateatFirstTrialOfRepetitionDate(e))+"\n\t\t\t\t\t")])])]}))],2)])},n=[],o=s("025e"),a=s("5fb0");function r(t,e,s){return Object(o["h"])(t,e)/s*100+"%"}var l={name:"Timeline",props:{dates:{type:Array},studyset:Object,completedDateStrings:Array,showTime:Boolean},methods:{formatDate(t){return this.$q.screen.lt.md?Object(o["e"])(t):Object(o["c"])(t)},formatTime(t){return Object(o["b"])(t)},isCompleted(t){return this.completedDateStrings&&this.completedDateStrings.includes(Object(o["d"])(t))},getSuccessRateatFirstTrialOfRepetitionDate(t){let{total:e,success:s,fails:i,notDone:n}=Object(o["g"])(this.studyset,Object(o["d"])(t));return e>0&&e!==n?Math.round(100*s/e)+"%":""},intervalStyle(t,e){return{left:`calc(${r(this.dates[0],t,this.totalHours)} + 23px)`,width:`calc(${r(t,this.dates[e+1],this.totalHours)} - 40px)`}},circleStyle(t,e){let s=this.completedDateStrings?this.completedDateStrings.length:0,i=s===e?"red":this.isCompleted(t)?a["a"][e]:"none",n=this.isCompleted(t)?a["a"][e]:"red";return{background:i,border:`2px solid ${n}`,left:`calc(${r(this.dates[0],t,this.totalHours)} - 10px)`,width:"28px",height:"28px",borderRadius:"14px"}},textStyle(t,e){let s=r(this.dates[0],t,this.totalHours);return{left:`calc(${s} - 45px)`,top:e%2===0?this.showTime?"0px":"13px":"56px"}},successRateStyle(t,e){let s=r(this.dates[0],t,this.totalHours);return{fontSize:"12px",color:"white",left:`calc(${s} - 47px)`,top:"34px"}}},computed:{totalHours(){return this.dates.length>0?Object(o["h"])(this.dates[0],this.dates[this.dates.length-1]):0}}},c=l,d=(s("d0c0"),s("2877")),u=s("0016"),h=s("eebe"),p=s.n(h),m=Object(d["a"])(c,i,n,!1,null,"e05e0b60",null);e["a"]=m.exports;p()(m,"components",{QIcon:u["a"]})},e7e2:function(t,e,s){"use strict";s("4e82");var i=s("5fb0"),n=s("025e");const o={0:0,1:1,2:2,3:4,4:8,5:16,6:32,7:64};function a(t){if(!t)return[];let e=Object.keys(t).sort(((t,e)=>{let s=Object(n["l"])(t),i=Object(n["l"])(e),o=s.getTime()-i.getTime();return 0===o?0:o>0?1:-1}));return e}function r(t,e,s){let i=t.filter((t=>{if(!t.history)return e.getTime()<s.getTime();let i,r=a(t.history),l=r.length,c=Object(n["j"])(r);if(c){const t=Object(n["l"])(c);i=Object(n["m"])(t,o[`${l}`])}else i=e;return Object(n["i"])(s,i)}));return i}function l(t,e,s){let i=t.history?Object.keys(t.history).length:0,r=a(t.history),l=0===r.length?e:Object(n["l"])(Object(n["j"])(r));for(let a=i;a<s;a++)l=Object(n["m"])(l,o[`${a}`]),r.push(Object(n["d"])(l));return r}function c(t){let e={},s=t.numberOfRepetitions?t.numberOfRepetitions:5,i=Object(n["l"])(t.startDate);return t.items.forEach((t=>{let n=l(t,i,s);n.forEach((t=>{let s=e[t];s?s++:s=1,e[t]=s}))})),console.log("collectedRepetitionDates",JSON.stringify(e,null,2)),e}class d{constructor(){}selectTerms(t,e){console.log("selectTerms",t.repetitionDates),console.log(`includes ${i["f"].includes(t.status)}`);const s=Object(n["l"])(t.startDate);if(i["f"].includes(t.status)){let i=r(t.items,s,e),o=Object(n["p"])(i),a={...t,items:o};return console.log("studysetTerms",JSON.stringify(a,null,2)),a}return[]}calculateRepetitionDates(t,e,s,i){if(i){let{sortedRepetitionDates:t,collectedRepetitionDates:e}=this.calculateRepetitionDatesEmpiric(i);return console.log("calculateRepetitionDatesEmpiric",t),t}console.log("calculateRepetitionDates in planninng mode");let a=[e],r=Math.min(Object.keys(o).length,s),l=e;for(let c=0;c<r-1;c++){let t=c+1;l=Object(n["m"])(l,o[`${t}`]),a.push(l)}return console.log("calculateRepetitionDates",JSON.stringify(a,null,2)),a}calculateRepetitionDatesEmpiric(t){let e=c(t),s=Object.keys(e).sort(((t,e)=>{let s=Object(n["l"])(t),i=Object(n["l"])(e),o=s.getTime()-i.getTime();return 0===o?0:o>0?1:-1}));return console.log("collectedRepetitionDates",JSON.stringify(e,null,2)),{sortedRepetitionDates:s,collectedRepetitionDates:e}}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case i["g"].completed:e.allOverProgress=100;break;case i["g"].notStarted:case i["g"].cancelled:e.allOverProgress=0;break;case i["g"].running:{let s={},i=Object(n["l"])(t.startDate),o=[];for(let e=0;e<60;e++){let a=Object(n["m"])(i,e),r=this.selectTerms(t,a),l=Object(n["d"])(a),c=r?r.length:0;s[l]=c,c>0&&o.push(l)}t.completedRepetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/o.length))}}return e}}const u=new d;e["a"]=u},f92b:function(t,e,s){"use strict";s("cc3a")}}]);