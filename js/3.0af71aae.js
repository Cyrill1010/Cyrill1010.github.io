(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{4018:function(t,e,s){"use strict";var a=s("ff52"),i=s("025e"),r=(s("ddb0"),s("40182")),o=s("7050"),l=s("e7e2");const n={simpleRepetition:r["a"],spacedRepetition:o["a"],leitnerRepetition:l["a"]};class c{constructor(){}provideStudysetTerms(t,e){let s=[];for(let a of t)switch(a.learnMethod){case"simpleRepetition":s.push(r["a"].selectTerms(a,e));break;case"spacedRepetition":s.push(o["a"].selectTerms(a,e));break;default:s.push(l["a"].selectTerms(a,e))}return console.log("provide studysetTerms",s),s}calculateRepetitionDates(t,e,s,a){console.log("calculateRepetitionDates");let i=this.getStrategy(t.learnMethod),r=[];return i&&i.calculateRepetitionDates&&(r=i.calculateRepetitionDates(e,s,a,t)),r}calculateFacts(t,e){let s=this.getStrategy(t.learnMethod),a={};return s&&s.calculateFacts?(console.log("delegate calculateFacts to strategy",t.learnMethod),a=s.calculateFacts(t,e)):console.log(`no strategy named ${t.learnMethod} for studyset topic ${t.topic} with implemented strategy.calculateFacts method found`),a}getStrategy(t){return n[t]}}const d=new c;var u=d;const p={running:"Started",notStarted:"Not started",completed:"Completed"},m={spacedRepetition:"Spaced repetition",simpleRepetition:"Simple repetition",leitnerRepetition:"Leitner"},h={methods:{stateTitle(t){return p[t]},learnMethodTitle(t){return m[t]},formatDate(t){if(!t)return"";if(!t.getTime){let e=Object(i["l"])(t);return e.getTime?Object(i["c"])(e):"nan"}return Object(i["c"])(t)},formatShortDate(t){if(!t)return"";if(!t.getTime){let e=Object(i["l"])(t);return e.getTime?Object(i["e"])(e):"nan"}return Object(i["e"])(t)},_getStudysetsWithFilteredTerms(t,e){return u.provideStudysetTerms(t,e)},_calculateRepetitionDates(t){console.log("_calculateRepetitionDates");let e,s=Object(i["l"])(t.dueDate),a=Object(i["l"])(t.startDate),r=t.numberOfRepetitions;return s&&a&&r&&(e=u.calculateRepetitionDates(t,s,a,r),console.log("repetitionDates calculated for ",t.learnMethod,JSON.stringify(e))),e},_calculateFacts(t){let e=Object(i["l"])(t.dueDate),s=Object(i["l"])(t.startDate),a=t.numberOfRepetitions,r=t.repetitionDates,o=t.learnMethod,l={};console.log("_calculateFacts");let n="spacedRepetition"===o&&e&&s&&a,c="spacedRepetition"!==o&&s&&a;return(n||c)&&(r&&0!==r.length||(r=u.calculateRepetitionDates(t,e,s,a),t.repetitionDates=r),l=u.calculateFacts(t,r)),l}},computed:{xs(){return this.$q.screen.lt.md},dark(){return a["a"].isActive},cssTextLight(){return"text-light-"+(this.dark?"dark":"bright")}}};e["a"]=h},40182:function(t,e,s){"use strict";var a=s("5fb0"),i=s("025e");const r=864e5;class o{constructor(){}selectTerms(t){const e=t.requiredSuccesses?t.requiredSuccesses:6;if(a["f"].includes(t.status)){let s=t.items.filter((t=>{if(!t.history)return!0;let s=0;return Object.keys(t.history).forEach((e=>{Array.isArray(t.history[e])&&(s+=t.history[e].filter((t=>!0===t.success)).length)})),s<=e})),a=Object(i["p"])(s),r={...t,items:a};return r}return[]}calculateRepetitionDates(t,e,s){console.log("calculateRepetitionDates");let a=[],i=e;for(let o=0;o<s;o++)a.push(i),i=new Date(i.getTime()+r);return a}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case a["g"].completed:e.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:e.allOverProgress=0;break;case a["g"].running:t.completedRepetitionDates&&t.repetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/t.repetitionDates.length))}return e}}e["a"]=new o},4120:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[t.studyset?s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"q-my-xs"},[s("q-card-section",{staticClass:"text-right row"},[s("div",{staticClass:"text-subtitle2"},[t._v("Studyset specification")]),s("div",{staticClass:"q-ml-auto col row"},[s("q-chip",{staticClass:"q-mr-xs text-white",attrs:{color:"accent",label:t.stateTitle(t.studyset.status)}}),"running"!==t.studyset.status?s("q-btn",{staticClass:"q-ml-auto  q-mr-xs text-white",attrs:{size:"sm",rounded:"",color:"negative",label:"reset"},on:{click:t.reset}}):t._e()],1)]),s("q-card-section",{staticClass:"py-0"},[s("div",{staticClass:"row q-col-gutter-md align-start py-0"},[s("div",{staticClass:"col-auto"},[s("label",{staticClass:"text-subtitle2"},[t._v("Learning method")]),t.editable?s("div",{staticStyle:{"margin-top":"10px"}},[s("q-btn-toggle",{attrs:{"no-wrap":"",rounded:"",size:"sm","toggle-color":"primary",options:t.learnMethods},model:{value:t.learnMethod,callback:function(e){t.learnMethod=e},expression:"learnMethod"}})],1):s("div",{staticClass:"q-mb-md"},[t._v(t._s(t.learnMethodTitle(t.learnMethod)))])]),s("div",{staticClass:"col-auto"},[s("label",{staticClass:"text-subtitle2"},[t._v("Number of repetitions")]),t.editable?s("q-slider",{attrs:{min:3,max:6,step:1,label:"",color:"primary"},model:{value:t.numberOfRepetitions,callback:function(e){t.numberOfRepetitions=e},expression:"numberOfRepetitions"}}):s("div",{staticClass:"q-mb-md"},[t._v(t._s(t.numberOfRepetitions))])],1),"spacedRepetition"===t.learnMethod?s("div",{staticClass:"col-4"},[s("label",{staticClass:"text-subtitle2"},[t._v("Due date")]),t.editable?s("q-input",{attrs:{bordered:"",dense:"",placeholder:"add the due date"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{mask:"DD.MM.YYYY"},model:{value:t.dueDateStr,callback:function(e){t.dueDateStr=e},expression:"dueDateStr"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1029868722),model:{value:t.dueDateStr,callback:function(e){t.dueDateStr=e},expression:"dueDateStr"}}):s("div",{staticClass:"q-mb-md"},[t._v(t._s(t.dueDateStr))])],1):t._e()])])],1),s("q-card",[s("div",{staticClass:"q-px-md q-pt-md text-subtitle2"},[t._v("Idealistic repetition dates")]),s(t.overviewComponent,{tag:"component",attrs:{numberOfRepetitions:t.numberOfRepetitions,dueDateStr:t.dueDateStr,studyset:t.studyset}})],1),t.studyset?s("term-editor",{staticClass:"q-mt-sm",attrs:{items:t.studyset.items}}):t._e(),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},["running"===t.studyset.status?s("q-btn",{staticClass:"q-pr-sm q-ml-auto q-mb-auto ",attrs:{color:"primary",rounded:"",size:"12px",disabled:!t.isLearnBtnActivated,label:"learn",icon:"play_arrow"},on:{click:t.learn}}):t._e(),"notStarted"===t.studyset.status?s("q-btn",{staticClass:"q-pr-sm q-ml-auto q-mb-auto ",attrs:{color:"primary",rounded:"",size:"12px",disabled:!t.isLearnBtnActivated,label:"start",icon:"play_arrow"},on:{click:t.start}}):t._e()],1)],1):t._e()])},i=[],r=s("4018"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",{staticClass:"rounded-borders full-width",attrs:{bordered:""}},[s("q-toolbar",[s("q-toolbar-title",[t._v(t._s(t.items.length)+" Terms")])],1),t._l(t.items,(function(e,a){return s("div",{key:"___"+a},[s("q-item",{key:a},[s("q-item-section",{attrs:{avatar:"",top:""}},[e.backgroundColor?s("q-chip",{staticClass:"text-white",style:{background:e.backgroundColor},attrs:{round:""}}):t._e()],1),t.editedItemIndex===a?s("q-item-section",{attrs:{top:""}},[s("q-input",{attrs:{dense:"",placeholder:"Please enter a definition"},on:{blur:t.save},model:{value:e.key,callback:function(s){t.$set(e,"key",s)},expression:"item.key"}}),s("q-input",{attrs:{dense:"",placeholder:"Please enter a solution"},on:{blur:t.save},model:{value:e.val,callback:function(s){t.$set(e,"val",s)},expression:"item.val"}})],1):s("q-item-section",{attrs:{top:""},on:{click:function(e){return t.editItem(a)}}},[s("q-item-label",[t._v(t._s(e.key))]),s("q-item-label",[t._v(t._s(e.val))])],1),s("q-item-section",{attrs:{top:"",side:""}},[s("div",{staticClass:"text-grey-8 q-gutter-xs"},[s("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(e){return t.deleteItem(a)}}}),s("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"edit"},on:{click:function(e){return t.editItem(a)}}}),s("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"color_lens"},on:{click:function(e){t.editItem(a),t.colorChoosingDialog=!t.colorChoosingDialog}}})],1)])],1),s("q-separator",{key:a+"_",attrs:{spaced:""}})],1)})),t.items?s("q-dialog",{attrs:{position:"right"},model:{value:t.colorChoosingDialog,callback:function(e){t.colorChoosingDialog=e},expression:"colorChoosingDialog"}},[s("q-card",{staticStyle:{width:"350px"}},[t.editedItemIndex?s("q-linear-progress",{attrs:{value:1,color:t.items[t.editedItemIndex].backgroundColor?t.items[t.editedItemIndex].backgroundColor:"grey"}}):t._e(),s("q-card-section",{staticClass:"row items-center no-wrap"},[s("div",[s("div",{staticClass:"text-weight-bold"},[t._v("Choose a color to associate with this term")]),s("div",{staticClass:"row"},t._l(t.COLOR_SCHEME,(function(e,a){return s("div",{key:a,staticClass:"col-1",style:{background:e,height:"40px",width:"40px"},on:{click:function(s){t.setBackgroundColor(e),t.colorChoosingDialog=!1}}})})),0)]),s("q-space")],1)],1)],1):t._e(),s("q-item",{staticClass:"justify-start"},[s("q-btn",{attrs:{color:"primary",size:"sm",outline:"",rounded:"",icon:"add"},on:{click:t.addNewItem}},[t._v("new term")])],1)],2)},l=[],n=s("5fb0"),c={name:"TermEditor",props:{items:Array},data(){return{editedItemIndex:null,colorChoosingDialog:!1,COLOR_SCHEME:n["a"]}},methods:{editItem(t){this.editedItemIndex=t},addNewItem(){this.$store.commit("database/addNewTerm",{items:this.items},{root:!0}),this.editItem(this.items.length-1)},deleteItem(t){this.$store.commit("database/deleteTerm",{items:this.items,index:t},{root:!0})},save(){this.$store.dispatch("database/saveAllStudySet",{},{root:!0})},setBackgroundColor(t){this.$store.commit("database/setTermBackgroundColor",{item:this.items[this.editedItemIndex],backgroundColor:t})}}},d=c,u=s("2877"),p=s("1c1c"),m=s("65c6"),h=s("6ac5"),b=s("9c40"),g=s("66e5"),f=s("4074"),y=s("b047"),D=s("27f9"),v=s("0170"),O=s("eb85"),S=s("24e8"),R=s("f09f"),x=s("6b1d"),C=s("a370"),q=s("2c91"),w=s("eebe"),_=s.n(w),T=Object(u["a"])(d,o,l,!1,null,null,null),j=T.exports;_()(T,"components",{QList:p["a"],QToolbar:m["a"],QToolbarTitle:h["a"],QBtn:b["a"],QItem:g["a"],QItemSection:f["a"],QChip:y["a"],QInput:D["a"],QItemLabel:v["a"],QSeparator:O["a"],QDialog:S["a"],QCard:R["a"],QLinearProgress:x["a"],QCardSection:C["a"],QSpace:q["a"]});var k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:"",bordered:""}},[s("q-card-section",[s("timeline",{attrs:{showTime:!1,studyset:t.studyset,dates:t.dates,completedDateStrings:t.studyset.completedRepetitionDates}})],1)],1)},$=[],M=s("7050"),I=s("da9e"),Q={name:"SpacedRepetitionOverview",components:{Timeline:I["a"]},props:{studyset:Object,numberOfRepetitions:Number,dueDateStr:String},computed:{dates(){let t;if(this.dueDateStr&&this.studyset&&this.numberOfRepetitions){let e=new Date(Date.parse(this.studyset.dueDate)),s=new Date(this.studyset.startDate?Date.parse(this.studyset.startDate):Date.now());t=M["a"].calculateRepetitionDates(e,s,this.numberOfRepetitions)}else t=[];return console.log("calculated dates upon dueDateStr",this.dueDateStr,t),t}}},P=Q,E=Object(u["a"])(P,k,$,!1,null,null,null),N=E.exports;_()(E,"components",{QCard:R["a"],QCardSection:C["a"]});var F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:"",bordered:""}},[s("q-card-section",[s("timeline",{attrs:{showTime:!1,studyset:t.studyset,dates:t.dates,completedDateStrings:t.studyset.completedRepetitionDates}})],1)],1)},L=[],A=s("40182"),z={name:"SimpleRepetitionOverview",components:{Timeline:I["a"]},props:{studyset:Object,numberOfRepetitions:Number,dueDateStr:String},computed:{dates(){let t;if(this.dueDateStr&&this.studyset&&this.numberOfRepetitions){let e=new Date(Date.parse(this.studyset.dueDate)),s=new Date(this.studyset.startDate?Date.parse(this.studyset.startDate):Date.now());t=A["a"].calculateRepetitionDates(e,s,this.numberOfRepetitions)}else t=[];return console.log("calculated dates upon dueDateStr",this.dueDateStr,t),t}}},B=z,H=Object(u["a"])(B,F,L,!1,null,null,null),J=H.exports;_()(H,"components",{QCard:R["a"],QCardSection:C["a"]});var Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:"",bordered:""}},[s("q-card-section",[s("timeline",{attrs:{showTime:!1,studyset:t.studyset,dates:t.dates,completedDateStrings:t.studyset.completedRepetitionDates}})],1)],1)},W=[],G=s("e7e2"),U={name:"LeitnerRepetitionOverview",components:{Timeline:I["a"]},props:{studyset:Object,numberOfRepetitions:Number,dueDateStr:String},computed:{dates(){let t;if(this.studyset&&this.numberOfRepetitions){let e=null,s=new Date(this.studyset.startDate?Date.parse(this.studyset.startDate):Date.now());t=G["a"].calculateRepetitionDates(e,s,this.numberOfRepetitions,this.studyset)}else t=[];return t}}},K=U,V=Object(u["a"])(K,Y,W,!1,null,null,null),X=V.exports;_()(V,"components",{QCard:R["a"],QCardSection:C["a"]});var Z=s("025e"),tt=s("52cd"),et=s.n(tt),st=s("2f62"),at={name:"studyset",mixins:[r["a"]],components:{SpacedRepetitionOverview:N,SimpleRepetitionOverview:J,LeitnerRepetitionOverview:X,TermEditor:j},mounted(){this.loadStudyset()},data(){return{studyMethods:["Spaced Repetition","Game"],dueDateStr:null,numberOfRepetitions:5,learnType:"",learnMethod:"spacedRepetition",studyset:null,learnMethods:[{label:"Simple repetition",value:"simpleRepetition"},{label:"Spaced repetition",value:"spacedRepetition"},{label:"Leitner",value:"leitnerRepetition"}],learnTypes:[{label:"Flashcards",value:"flashcards"},{label:"Writing",value:"writing"}]}},methods:{loadStudyset(){let{folderId:t,topicId:e}=this.$route.params;console.log("loadStudyset for params ",t,e);let s=`$[?(@.folderId=="${t}")].studysets[?(@.topicId=="${e}")]`;console.log(s);let a=et.a.query(this.folders,s);a&&a.length>0&&(this.studyset=a[0]),this.studyset.learnMethod&&(this.learnMethod=this.studyset.learnMethod),console.log("this.studyset.dueDate",this.studyset.dueDate),this.studyset.dueDate&&(this.dueDateStr=this.studyset.dueDate),this.studyset.numberOfRepetitions&&(this.numberOfRepetitions=this.studyset.numberOfRepetitions),this.studyset.learnType&&(this.learnType=this.studyset.learnType);let i=et.a.query(this.folders,`$[?(@.folderId=="${t}")]`);this.$store.commit("view/setPageTitle",{title:`Edit studyset "${i?i[0].folderName:""}/${this.studyset.topic}"`},{root:!0})},capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.substring(1)},formatDateAsYYYYMMDD(t){return Object(Z["d"])(t)},learn(){this.save(),this.$router.push(`${this.$route.path}/learning`)},start(){this.studyset.status="running",this.studyset.items.forEach((t=>{t.history={}})),this.save(),this.$router.push(`${this.$route.path}/learning`)},reset(){this.studyset.status="notStarted",this.studyset.completedRepetitionDates=[],this.studyset.repetitionDates=[],this.studyset.items.forEach((t=>{t.history={}})),this.studyset.facts=this._calculateFacts(this.studyset),this.save(),this.$router.push("/home")},save(){this.studyset.startDate=Object(Z["d"])(new Date(Date.now())),this.dueDateStr&&(this.studyset.dueDate=Object(Z["d"])(Object(Z["k"])(this.dueDateStr))),this.studyset.learnMethod=this.learnMethod,this.studyset.numberOfRepetitions=this.numberOfRepetitions,this.$store.dispatch("database/saveAllStudySet",{},{root:!0})}},computed:{...Object(st["b"])("database",{folders:t=>t.folders}),editable(){return this.studyset.status===n["g"].notStarted},path(){return this.$route.path.split("/").map((t=>this.capitalizeFirstLetter(t))).slice(2)},isLearnBtnActivated(){return"spacedRepetition"===this.learnMethod?this.dueDateStr&&this.numberOfRepetitions:this.numberOfRepetitions},overviewComponent(){switch(this.learnMethod){case"spacedRepetition":return"SpacedRepetitionOverview";case"leitnerRepetition":return"LeitnerRepetitionOverview";case"simpleRepetition":return"SimpleRepetitionOverview"}return J}},watch:{dueDateStr(t,e){this.save()},learnMethod(t,e){this.save()},learnMethod(t,e){this.save()},numberOfRepetitions(t,e){this.save()},$route(t,e){this.loadStudyset()}}},it=at,rt=s("9989"),ot=s("6a67"),lt=s("c1d0"),nt=s("0016"),ct=s("7cbe"),dt=s("52ee"),ut=s("de5e"),pt=s("7f67"),mt=Object(u["a"])(it,a,i,!1,null,null,null);e["default"]=mt.exports;_()(mt,"components",{QPage:rt["a"],QCard:R["a"],QCardSection:C["a"],QChip:y["a"],QBtn:b["a"],QBtnToggle:ot["a"],QSlider:lt["a"],QInput:D["a"],QIcon:nt["a"],QPopupProxy:ct["a"],QDate:dt["a"],QPageSticky:ut["a"]}),_()(mt,"directives",{ClosePopup:pt["a"]})},7050:function(t,e,s){"use strict";var a=s("5fb0"),i=s("025e");const r=864e5;class o{constructor(){}selectTerms(t,e){console.log(`includes ${a["f"].includes(t.status)}`);t.requiredSuccesses&&t.requiredSuccesses;if(a["f"].includes(t.status)){let e=t.items,s=Object(i["p"])(e),a={...t,items:s};return console.log("studysetTerms",JSON.stringify(a,null,2)),a}return[]}calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:e,retentionDecreases:s=[1.7,3.1,6.7,10,20,30,40,50]}){const a=s,i=.8,r=9.2;let o=0;for(let n=0;n<t;n++)o+=a[n];const l=-Math.log(i)*o;return e?l/r*e:l}calculateRepetitionDates(t,e,s){console.log("calculateRepetitionDates");let a=[],i=(t.getTime()-e.getTime())/r;for(let o=0;o<s;o++){let t=o+1,s=this.calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:i}),l=new Date(e.getTime()+r*s);a.push(l)}return a}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case a["g"].completed:e.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:e.allOverProgress=0;break;case a["g"].running:t.completedRepetitionDates&&t.repetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/t.repetitionDates.length))}return e}}const l=new o;e["a"]=l},"81ff":function(t,e,s){},d0c0:function(t,e,s){"use strict";s("81ff")},da9e:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{padding:"0 40px"}},[s("div",{staticStyle:{position:"relative",height:"80px"}},[t._l(t.dates,(function(e,a){return[s("div",{key:a,staticClass:"circle",style:t.circleStyle(e,a),on:{click:function(s){return t.$emit("onDateSelected",e)}}}),a<t.dates.length-1?s("div",{key:a+"_",staticClass:"line",style:t.intervalStyle(e,a)}):t._e(),s("div",{key:a+"__",staticClass:"text",style:t.textStyle(e,a)},[s("div",[t._v(t._s(t.formatDate(e)))]),t.showTime?s("div",[t._v(t._s(t.formatTime(e)))]):t._e()]),s("div",{key:a+"___",staticClass:"text",style:t.successRateStyle(e,a)},[s("div",[t._v("\n\t\t\t\t\t"+t._s(t.getSuccessRateatFirstTrialOfRepetitionDate(e))+"\n\t\t\t\t\t")])])]}))],2)])},i=[],r=s("025e"),o=s("5fb0");function l(t,e,s){return Object(r["h"])(t,e)/s*100+"%"}var n={name:"Timeline",props:{dates:{type:Array},studyset:Object,completedDateStrings:Array,showTime:Boolean},methods:{formatDate(t){return this.$q.screen.lt.md?Object(r["e"])(t):Object(r["c"])(t)},formatTime(t){return Object(r["b"])(t)},isCompleted(t){return this.completedDateStrings&&this.completedDateStrings.includes(Object(r["d"])(t))},getSuccessRateatFirstTrialOfRepetitionDate(t){let{total:e,success:s,fails:a,notDone:i}=Object(r["g"])(this.studyset,Object(r["d"])(t));return e>0&&e!==i?Math.round(100*s/e)+"%":""},intervalStyle(t,e){return{left:`calc(${l(this.dates[0],t,this.totalHours)} + 23px)`,width:`calc(${l(t,this.dates[e+1],this.totalHours)} - 40px)`}},circleStyle(t,e){let s=this.completedDateStrings?this.completedDateStrings.length:0,a=s===e?"red":this.isCompleted(t)?o["a"][e]:"none",i=this.isCompleted(t)?o["a"][e]:"red";return{background:a,border:`2px solid ${i}`,left:`calc(${l(this.dates[0],t,this.totalHours)} - 10px)`,width:"28px",height:"28px",borderRadius:"14px"}},textStyle(t,e){let s=l(this.dates[0],t,this.totalHours);return{left:`calc(${s} - 45px)`,top:e%2===0?this.showTime?"0px":"13px":"56px"}},successRateStyle(t,e){let s=l(this.dates[0],t,this.totalHours);return{fontSize:"12px",color:"white",left:`calc(${s} - 47px)`,top:"34px"}}},computed:{totalHours(){return this.dates.length>0?Object(r["h"])(this.dates[0],this.dates[this.dates.length-1]):0}}},c=n,d=(s("d0c0"),s("2877")),u=s("0016"),p=s("eebe"),m=s.n(p),h=Object(d["a"])(c,a,i,!1,null,"e05e0b60",null);e["a"]=h.exports;m()(h,"components",{QIcon:u["a"]})},e7e2:function(t,e,s){"use strict";s("4e82");var a=s("5fb0"),i=s("025e");const r={0:0,1:1,2:2,3:4,4:8,5:16,6:32,7:64};function o(t){if(!t)return[];let e=Object.keys(t).sort(((t,e)=>{let s=Object(i["l"])(t),a=Object(i["l"])(e),r=s.getTime()-a.getTime();return 0===r?0:r>0?1:-1}));return e}function l(t,e,s){let a=t.filter((t=>{if(!t.history)return e.getTime()<s.getTime();let a,l=o(t.history),n=l.length,c=Object(i["j"])(l);if(c){const t=Object(i["l"])(c);a=Object(i["m"])(t,r[`${n}`])}else a=e;return Object(i["i"])(s,a)}));return a}function n(t,e,s){let a=t.history?Object.keys(t.history).length:0,l=o(t.history),n=0===l.length?e:Object(i["l"])(Object(i["j"])(l));for(let o=a;o<s;o++)n=Object(i["m"])(n,r[`${o}`]),l.push(Object(i["d"])(n));return l}function c(t){let e={},s=t.numberOfRepetitions?t.numberOfRepetitions:5,a=Object(i["l"])(t.startDate);return t.items.forEach((t=>{let i=n(t,a,s);i.forEach((t=>{let s=e[t];s?s++:s=1,e[t]=s}))})),console.log("collectedRepetitionDates",JSON.stringify(e,null,2)),e}class d{constructor(){}selectTerms(t,e){console.log("selectTerms",t.repetitionDates),console.log(`includes ${a["f"].includes(t.status)}`);const s=Object(i["l"])(t.startDate);if(a["f"].includes(t.status)){let a=l(t.items,s,e),r=Object(i["p"])(a),o={...t,items:r};return console.log("studysetTerms",JSON.stringify(o,null,2)),o}return[]}calculateRepetitionDates(t,e,s,a){if(a){let{sortedRepetitionDates:t,collectedRepetitionDates:e}=this.calculateRepetitionDatesEmpiric(a);return console.log("calculateRepetitionDatesEmpiric",t),t}console.log("calculateRepetitionDates in planninng mode");let o=[e],l=Math.min(Object.keys(r).length,s),n=e;for(let c=0;c<l-1;c++){let t=c+1;n=Object(i["m"])(n,r[`${t}`]),o.push(n)}return console.log("calculateRepetitionDates",JSON.stringify(o,null,2)),o}calculateRepetitionDatesEmpiric(t){let e=c(t),s=Object.keys(e).sort(((t,e)=>{let s=Object(i["l"])(t),a=Object(i["l"])(e),r=s.getTime()-a.getTime();return 0===r?0:r>0?1:-1}));return console.log("collectedRepetitionDates",JSON.stringify(e,null,2)),{sortedRepetitionDates:s,collectedRepetitionDates:e}}calculateFacts(t){let e={allOverProgress:0};switch(t.status){case a["g"].completed:e.allOverProgress=100;break;case a["g"].notStarted:case a["g"].cancelled:e.allOverProgress=0;break;case a["g"].running:{let s={},a=Object(i["l"])(t.startDate),r=[];for(let e=0;e<60;e++){let o=Object(i["m"])(a,e),l=this.selectTerms(t,o),n=Object(i["d"])(o),c=l?l.length:0;s[n]=c,c>0&&r.push(n)}t.completedRepetitionDates&&(e.allOverProgress=Math.round(100*t.completedRepetitionDates.length/r.length))}}return e}}const u=new d;e["a"]=u}}]);