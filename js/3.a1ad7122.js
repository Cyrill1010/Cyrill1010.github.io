(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{4120:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("div",{staticClass:"q-pa-md"},[t.studyset?s("q-card",{staticClass:"row col-11"},[s("q-card-section",{staticClass:"row full-width"},[s("div",{staticClass:"column"},[s("div",{staticClass:"text-h6"},[t._v("\n\t\t\t\t\t\tStudyset - "+t._s(t.studyset.topic)+"\n\t\t\t\t\t")]),s("q-breadcrumbs",{attrs:{gutter:"sm","active-color":"black"}},t._l(t.path,(function(e,a){return s("q-breadcrumbs-el",{key:a,staticClass:"text-caption",class:{"text-primary":a===t.path.length-1},attrs:{label:e}})})),1)],1)]),s("q-card-section",[s("div",{staticClass:"row q-col-gutter-lg"},[s("div",{staticClass:"column col-7"},[s("label",{staticClass:"text-subtitle2"},[t._v("Due date ")]),s("div",{staticStyle:{width:"150px"}},[s("q-input",{staticClass:"col",attrs:{type:"date",dense:"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}})],1)]),s("div",{staticClass:"column col-5"},[s("label",{staticClass:"text-subtitle2"},[t._v("Number of repetitions\n\t\t\t\t\t\t")]),s("q-input",{staticClass:"col",staticStyle:{width:"150px"},attrs:{type:"number",dense:"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.numberOfRepetitions,callback:function(e){t.numberOfRepetitions=e},expression:"numberOfRepetitions"}})],1)]),s("div",{staticClass:"row q-col-gutter-lg"},[s("div",{staticClass:"column col-7"},[s("label",{staticClass:"text-subtitle2"},[t._v("Learning algorithm")]),s("div",[s("q-btn-toggle",{attrs:{"toggle-color":"primary",options:t.learnMethods},model:{value:t.learnMethod,callback:function(e){t.learnMethod=e},expression:"learnMethod"}})],1)]),s("div",{staticClass:"column col-5"},[s("label",{staticClass:"text-subtitle2"},[t._v("Learning type")]),s("div",[s("q-btn-toggle",{staticStyle:{height:"56px"},attrs:{"toggle-color":"primary",options:t.learnTypes},model:{value:t.learnType,callback:function(e){t.learnType=e},expression:"learnType"}})],1)])])]),s("q-card-section",{staticClass:"full-width"},[s(t.overview,{tag:"component",staticClass:"col",attrs:{numberOfRepetitions:t.numberOfRepetitions,dueDateStr:t.dueDate,studyset:t.studyset}})],1)],1):t._e(),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[s("q-fab",{attrs:{disabled:!t.isLearnBtnActivated,label:"Learn",icon:"play_arrow",color:"accent"},on:{click:t.learn}})],1),s("q-separator",{staticClass:"q-my-md"}),t.studyset?s("term-editor",{attrs:{items:t.studyset.items}}):t._e()],1)])},i=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",{staticClass:"rounded-borders full-width",attrs:{bordered:""}},[s("q-toolbar",[s("q-toolbar-title",[t._v(t._s(t.items.length)+" Terms")]),s("q-btn",{attrs:{color:"secondary",icon:"add"},on:{click:t.addNewItem}})],1),t._l(t.items,(function(e,a){return[s("q-item",{key:a},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-icon",{attrs:{name:"account_tree",color:"black",size:"34px"}})],1),s("q-item-section",{staticClass:"col-2 gt-sm",attrs:{top:""}},[s("q-item-label",{staticClass:"q-mt-sm"},[t._v("GitHub")])],1),t.editedItemIndex===a?s("q-item-section",{attrs:{top:""}},[s("q-input",{attrs:{dense:"",placeholder:"Please enter a definition"},on:{blur:t.save},model:{value:e.key,callback:function(s){t.$set(e,"key",s)},expression:"item.key"}}),s("q-input",{attrs:{dense:"",placeholder:"Please enter a solution"},on:{blur:t.save},model:{value:e.val,callback:function(s){t.$set(e,"val",s)},expression:"item.val"}})],1):s("q-item-section",{attrs:{top:""},on:{click:function(e){return t.editItem(a)}}},[s("q-item-label",[t._v(t._s(e.key))]),s("q-item-label",[t._v(t._s(e.val))])],1),s("q-item-section",{attrs:{top:"",side:""}},[s("div",{staticClass:"text-grey-8 q-gutter-xs"},[s("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(e){return t.deleteItem(a)}}}),s("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"edit"},on:{click:function(e){return t.editItem(a)}}})],1)])],1),s("q-separator",{key:a+"_",attrs:{spaced:""}})]})),s("q-item",{staticClass:"justify-center"},[s("q-btn",{attrs:{color:"secondary",icon:"add"},on:{click:t.addNewItem}},[t._v("add another term")])],1)],2)},l=[],n={name:"TermEditor",props:{items:Array},data(){return{editedItemIndex:null}},methods:{editItem(t){this.editedItemIndex=t},addNewItem(){this.$store.commit("database/addNewTerm",{items:this.items},{root:!0}),this.editItem(this.items.length-1)},deleteItem(t){this.$store.commit("database/deleteTerm",{items:this.items,index:t},{root:!0})},save(){this.$store.dispatch("database/saveAllStudySet",{},{root:!0})}}},o=n,c=s("2877"),d=s("1c1c"),u=s("65c6"),p=s("6ac5"),m=s("9c40"),h=s("66e5"),b=s("4074"),y=s("0016"),f=s("0170"),v=s("27f9"),S=s("eb85"),g=s("eebe"),_=s.n(g),T=Object(c["a"])(o,r,l,!1,null,null,null),x=T.exports;_()(T,"components",{QList:d["a"],QToolbar:u["a"],QToolbarTitle:p["a"],QBtn:m["a"],QItem:h["a"],QItemSection:b["a"],QIcon:y["a"],QItemLabel:f["a"],QInput:v["a"],QSeparator:S["a"]});var q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:"",bordered:""}},[s("q-card-section",[s("timeline",{attrs:{dates:t.dates}})],1)],1)},D=[],w=s("f65c"),R=s("d3f2"),O={name:"SpacedRepetitionOverview",components:{Timeline:R["a"]},props:{studyset:Object,dueDateStr:String,numberOfRepetitions:Number},computed:{dates(){if(console.log("calculate dates"),this.dueDateStr&&this.studyset&&this.numberOfRepetitions){let t=new Date(Date.parse(this.dueDateStr)),e=new Date(this.studyset.startDate?Date.parse(this.studyset.startDate):Date.now());return w["a"].calculateRepetitionDates(t,e,this.numberOfRepetitions)}return null}}},C=O,I=s("f09f"),k=s("a370"),$=Object(c["a"])(C,q,D,!1,null,null,null),Q=$.exports;_()($,"components",{QCard:I["a"],QCardSection:k["a"]});var E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v("simple repetition overview")])},M=[],N={name:"SimpleRepetitionOverview"},j=N,A=Object(c["a"])(j,E,M,!1,null,null,null),L=A.exports,P=s("52cd"),z=s.n(P),B=s("2f62"),H={name:"studyset",components:{SpacedRepetitionOverview:Q,SimpleRepetitionOverview:L,TermEditor:x},mounted(){this.loadStudyset()},data(){return{studyMethods:["Spaced Repetition","Game"],dueDate:"",numberOfRepetitions:5,learnType:"",learnMethod:"spacedRepetition",studyset:null,learnMethods:[{label:"Simple repetition",value:"simpleRepetition"},{label:"Spaced repetition",value:"spacedRepetition"},{label:"Leitner",value:"leitner"}],learnTypes:[{label:"Flashcards",value:"flashcards"},{label:"Writing",value:"writing"}]}},methods:{loadStudyset(){console.log("loadStudyset for params ",this.$route.params.folderId,this.$route.params.topicId);let t=`$[?(@.folderId=="${this.$route.params.folderId}")].studysets[?(@.topicId=="${this.$route.params.topicId}")]`;console.log(t);let e=z.a.query(this.folders,t);e&&e.length>0&&(this.studyset=e[0]),this.studyset.learnMethod&&(this.learnMethod=this.studyset.learnMethod),this.studyset.dueDate&&(this.dueDate=this.studyset.dueDate),this.studyset.numberOfRepetitions&&(this.numberOfRepetitions=this.studyset.numberOfRepetitions),this.studyset.learnType&&(this.learnType=this.studyset.learnType)},capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.substring(1)},learn(){this.studyset.startDate=new Date(Date.now()).toISOString(),this.studyset.dueDate=this.dueDate,this.studyset.learnMethod=this.learnMethod,this.studyset.learnType=this.learnType,this.studyset.numberOfRepetitions=this.numberOfRepetitions,this.$store.dispatch("database/saveAllStudySet",{},{root:!0}),this.$router.push(`${this.$route.path}/learning`)}},computed:{...Object(B["b"])("database",{folders:t=>t.folders}),path(){return this.$route.path.split("/").map((t=>this.capitalizeFirstLetter(t))).slice(2)},isLearnBtnActivated(){return this.dueDate&&this.numberOfRepetitions&&"spacedRepetition"===this.learnMethod},overview(){switch(this.learnMethod){case"spacedRepetition":return"SpacedRepetitionOverview";case"simpleRepetition":return"SimpleRepetitionOverview"}return L}},watch:{dueDate(t,e){console.log("dueDate",t)},$route(t,e){this.loadStudyset()}}},G=H,U=s("9989"),F=s("ead5"),Y=s("079e"),J=s("6a67"),W=s("de5e"),K=s("c294"),V=Object(c["a"])(G,a,i,!1,null,null,null);e["default"]=V.exports;_()(V,"components",{QPage:U["a"],QCard:I["a"],QCardSection:k["a"],QBreadcrumbs:F["a"],QBreadcrumbsEl:Y["a"],QInput:v["a"],QBtnToggle:J["a"],QPageSticky:W["a"],QFab:K["a"],QSeparator:S["a"]})},"5fb0":function(t,e,s){"use strict";e["a"]={STUDYSET_STATES:["running","notStarted","completed","cancelled"],STUDYSET_STATES_IN_PROGRESS:["running"]}},"89b2":function(t,e,s){"use strict";s("d2ea")},d2ea:function(t,e,s){},d3f2:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{padding:"0 20px"}},[s("div",{staticStyle:{position:"relative",height:"80px"}},[t._l(t.dates,(function(e,a){return[s("div",{key:a,staticClass:"circle",style:t.circleStyle(e,a),on:{click:function(s){return t.$emit("onDateSelected",e)}}}),a<t.dates.length-1?s("div",{key:a+"_",staticClass:"line",style:t.intervalStyle(e,a)}):t._e(),s("div",{key:a+"__",staticClass:"text",style:t.textStyle(e,a),on:{click:function(s){return t.$emit("onDateSelected",e)}}},[s("div",[t._v(t._s(t.formatDate(e)))]),t.showTime?s("div",[t._v(t._s(t.formatTime(e)))]):t._e()])]}))],2)])},i=[],r=s("025e");function l(t,e,s){return Object(r["e"])(t,e)/s*100+"%"}var n={name:"Timeline",props:{dates:{type:Array},showTime:Boolean},methods:{formatDate(t){return Object(r["d"])(t)},formatTime(t){return Object(r["c"])(t)},intervalStyle(t,e){return{left:`calc(${l(this.dates[0],t,this.totalHours)} + 15px)`,width:`calc(${l(t,this.dates[e+1],this.totalHours)} - 30px)`}},circleStyle(t,e){return{left:`calc(${l(this.dates[0],t,this.totalHours)} - 10px)`,width:"20px"}},textStyle(t,e){let s=l(this.dates[0],t,this.totalHours);return{left:`calc(${s} - 50px)`,top:e%2===0?this.showTime?"0px":"15px":"52px"}}},computed:{totalHours(){return this.dates.length>0?Object(r["e"])(this.dates[0],this.dates[this.dates.length-1]):0}}},o=n,c=(s("89b2"),s("2877")),d=Object(c["a"])(o,a,i,!1,null,"e5638c4c",null);e["a"]=d.exports},f65c:function(t,e,s){"use strict";var a=s("5fb0"),i=s("025e");const r=864e5;class l{constructor(){}computeTerms(t,e){console.log(`includes ${a["a"].STUDYSET_STATES_IN_PROGRESS.includes(t.status)}`);const s=t.requiredSuccesses?t.requiredSuccesses:6;if(a["a"].STUDYSET_STATES_IN_PROGRESS.includes(t.status)){let e=t.items.filter((t=>!t.history||t.history.filter((t=>t.success)).length<=s));e.forEach((t=>t.successCurrentRun=null));let a=Object(i["g"])(e),r={...t,items:a};return console.log("simpleRepetionStudysetTerms",JSON.stringify(r,null,2)),r}return[]}calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:e,retentionDecreases:s=[1.7,3.1,6.7,10,20,30,40,50]}){const a=s,i=.8;let r=0;for(let n=0;n<t;n++)r+=a[n];const l=-Math.log(i)*r;return e?l/9.2*e:l}calculateRepetitionDates(t,e,s){console.log("calculateRepetitionDates");let a=[],i=(t.getTime()-e.getTime())/r;for(let l=0;l<s;l++){let t=l+1,s=this.calculateNextRepetitionDateTime({repetitionNumber:t,totalDays:i}),n=new Date(e.getTime()+r*s);a.push(n)}return a}}const n=new l;e["a"]=n}}]);